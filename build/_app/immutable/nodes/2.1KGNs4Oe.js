import"../chunks/DsnmJJEf.js";import{i as Ko}from"../chunks/CGJwySbc.js";import{s as De,o as To}from"../chunks/DzlMttZn.js";import{C as nn,y as Ne,an as Ha,az as na,z as tr,x as Ya,g as S,J as Do,A as Io,H as jo,B as Na,F as wn,a3 as Kt,a5 as $o,aC as No,a6 as Hr,bc as Mo,bd as or,be as ir,bf as en,bg as Ga,at as Qa,aG as qo,aT as Bo,X as Ma,a4 as qa,bh as Xa,a8 as Ro,bi as Lr,a2 as Fo,af as Za,bj as zo,bk as Lo,ap as Wo,bl as Vo,as as Uo,bm as Ho,N as Ja,bn as Yo,E as Go,D as Qo,bo as Xo,aB as Zo,bp as Jo,aZ as ei,bq as ti,aQ as ni,b as Yr,a0 as ri,br as ai,aU as tt,K as sr,L as pe,p as kn,m as Pe,k as Ge,w as Y,q as L,v as F,l as oe,o as En,t as Me,i as nt,aW as Ba,b7 as eo,ag as oi,bs as to,bt as ii,e as bn,aV as Gr,bu as si,bv as ui,a as ci}from"../chunks/B2X6jWNY.js";import{p as Wt,i as Le,l as it,s as mt,c as Ra}from"../chunks/C1IHh9Gs.js";import{a as xn,s as Qr,r as Xr,b as nr,c as Fa}from"../chunks/DaoldV9W.js";function Zr(g,v){return v}function li(g,v,x){for(var w=g.items,T=[],O=v.length,P=0;P<O;P++)Vo(v[P].e,T,!0);var A=O>0&&T.length===0&&x!==null;if(A){var te=x.parentNode;Uo(te),te.append(x),w.clear(),yt(g,v[0].prev,v[O-1].next)}Ho(T,()=>{for(var re=0;re<O;re++){var le=v[re];A||(w.delete(le.k),yt(g,le.prev,le.next)),Za(le.e,!A)}})}function an(g,v,x,w,T,O=null){var P=g,A={flags:v,items:new Map,first:null},te=(v&Ga)!==0;if(te){var re=g;P=Ne?nn(Ha(re)):re.appendChild(na())}Ne&&tr();var le=null,ie=!1,me=new Map,xe=Do(()=>{var ge=x();return qo(ge)?ge:ge==null?[]:Qa(ge)}),W,X;function ae(){fi(X,W,A,me,P,T,v,w,x),O!==null&&(W.length===0?le?Xa(le):le=Hr(()=>O(P)):le!==null&&Ro(le,()=>{le=null}))}Ya(()=>{X??=Ja,W=S(xe);var ge=W.length;if(ie&&ge===0)return;ie=ge===0;let be=!1;if(Ne){var H=Io(P)===jo;H!==(ge===0)&&(P=Na(),nn(P),wn(!1),be=!0)}if(Ne){for(var V=null,G,q=0;q<ge;q++){if(Kt.nodeType===$o&&Kt.data===No){P=Kt,be=!0,wn(!1);break}var R=W[q],M=w(R,q);G=Jr(Kt,A,V,null,R,M,q,T,v,x),A.items.set(M,G),V=G}ge>0&&nn(Na())}if(Ne)ge===0&&O&&(le=Hr(()=>O(P)));else if(Mo()){var J=new Set,ye=en;for(q=0;q<ge;q+=1){R=W[q],M=w(R,q);var ce=A.items.get(M)??me.get(M);ce?(v&(or|ir))!==0&&no(ce,R,q,v):(G=Jr(null,A,null,null,R,M,q,T,v,x,!0),me.set(M,G)),J.add(M)}for(const[se,we]of A.items)J.has(se)||ye.skipped_effects.add(we.e);ye.add_callback(ae)}else ae();be&&wn(!0),S(xe)}),Ne&&(P=Kt)}function fi(g,v,x,w,T,O,P,A,te){var re=(P&Lo)!==0,le=(P&(or|ir))!==0,ie=v.length,me=x.items,xe=x.first,W=xe,X,ae=null,ge,be=[],H=[],V,G,q,R;if(re)for(R=0;R<ie;R+=1)V=v[R],G=A(V,R),q=me.get(G),q!==void 0&&(q.a?.measure(),(ge??=new Set).add(q));for(R=0;R<ie;R+=1){if(V=v[R],G=A(V,R),q=me.get(G),q===void 0){var M=w.get(G);if(M!==void 0){w.delete(G),me.set(G,M);var J=ae?ae.next:W;yt(x,ae,M),yt(x,M,J),Wr(M,J,T),ae=M}else{var ye=W?W.e.nodes_start:T;ae=Jr(ye,x,ae,ae===null?x.first:ae.next,V,G,R,O,P,te)}me.set(G,ae),be=[],H=[],W=ae.next;continue}if(le&&no(q,V,R,P),(q.e.f&Lr)!==0&&(Xa(q.e),re&&(q.a?.unfix(),(ge??=new Set).delete(q))),q!==W){if(X!==void 0&&X.has(q)){if(be.length<H.length){var ce=H[0],se;ae=ce.prev;var we=be[0],qe=be[be.length-1];for(se=0;se<be.length;se+=1)Wr(be[se],ce,T);for(se=0;se<H.length;se+=1)X.delete(H[se]);yt(x,we.prev,qe.next),yt(x,ae,we),yt(x,qe,ce),W=ce,ae=qe,R-=1,be=[],H=[]}else X.delete(q),Wr(q,W,T),yt(x,q.prev,q.next),yt(x,q,ae===null?x.first:ae.next),yt(x,ae,q),ae=q;continue}for(be=[],H=[];W!==null&&W.k!==G;)(W.e.f&Lr)===0&&(X??=new Set).add(W),H.push(W),W=W.next;if(W===null)continue;q=W}be.push(q),ae=q,W=q.next}if(W!==null||X!==void 0){for(var ke=X===void 0?[]:Qa(X);W!==null;)(W.e.f&Lr)===0&&ke.push(W),W=W.next;var Ie=ke.length;if(Ie>0){var lt=(P&Ga)!==0&&ie===0?T:null;if(re){for(R=0;R<Ie;R+=1)ke[R].a?.measure();for(R=0;R<Ie;R+=1)ke[R].a?.fix()}li(x,ke,lt)}}re&&Fo(()=>{if(ge!==void 0)for(q of ge)q.a?.apply()}),g.first=x.first&&x.first.e,g.last=ae&&ae.e;for(var Be of w.values())Za(Be.e);w.clear()}function no(g,v,x,w){(w&or)!==0&&qa(g.v,v),(w&ir)!==0?qa(g.i,x):g.i=x}function Jr(g,v,x,w,T,O,P,A,te,re,le){var ie=(te&or)!==0,me=(te&zo)===0,xe=ie?me?Bo(T,!1,!1):Ma(T):T,W=(te&ir)===0?P:Ma(P),X={i:W,v:xe,k:O,a:null,e:null,prev:x,next:w};try{if(g===null){var ae=document.createDocumentFragment();ae.append(g=na())}return X.e=Hr(()=>A(g,xe,W,re),Ne),X.e.prev=x&&x.e,X.e.next=w&&w.e,x===null?le||(v.first=X):(x.next=X,x.e.next=X.e),w!==null&&(w.prev=X,w.e.prev=X.e),X}finally{}}function Wr(g,v,x){for(var w=g.next?g.next.e.nodes_start:x,T=v?v.e.nodes_start:x,O=g.e.nodes_start;O!==null&&O!==w;){var P=Wo(O);T.before(O),O=P}}function yt(g,v,x){v===null?g.first=x:(v.next=x,v.e.next=x&&x.e),x!==null&&(x.prev=v,x.e.prev=v&&v.e)}function ct(g,v,x,w,T){Ne&&tr();var O=v.$$slots?.[x],P=!1;O===!0&&(O=v.children,P=!0),O===void 0||O(g,P?()=>w:w)}function di(g,v,x,w,T,O){let P=Ne;Ne&&tr();var A=null;Ne&&Kt.nodeType===Yo&&(A=Kt,tr());var te=Ne?Kt:g,re=new Qo(te,!1);Ya(()=>{const le=v()||null;var ie=Xo;if(le===null){re.ensure(null,null);return}return re.ensure(le,me=>{if(le){if(A=Ne?A:document.createElementNS(ie,le),Zo(A,A),w){Ne&&Jo(le)&&A.append(document.createComment(""));var xe=Ne?Ha(A):A.appendChild(na());Ne&&(xe===null?wn(!1):nn(xe)),w(A,xe)}Ja.nodes_end=A,me.before(A)}Ne&&nn(me)}),()=>{}},Go),ei(()=>{}),P&&(wn(!0),nn(te))}function rr(g,v,x=v){var w=new WeakSet;ti(g,"input",async T=>{var O=T?g.defaultValue:g.value;if(O=Vr(g)?Ur(O):O,x(O),en!==null&&w.add(en),await ni(),O!==(O=v())){var P=g.selectionStart,A=g.selectionEnd,te=g.value.length;if(g.value=O??"",A!==null){var re=g.value.length;P===A&&A===te&&re>te?(g.selectionStart=re,g.selectionEnd=re):(g.selectionStart=P,g.selectionEnd=Math.min(A,re))}}}),(Ne&&g.defaultValue!==g.value||Yr(v)==null&&g.value)&&(x(Vr(g)?Ur(g.value):g.value),en!==null&&w.add(en)),ri(()=>{var T=v();if(g===document.activeElement){var O=ai??en;if(w.has(O))return}Vr(g)&&T===Ur(g.value)||g.type==="date"&&!T&&!g.value||T!==g.value&&(g.value=T??"")})}function Vr(g){var v=g.type;return v==="number"||v==="range"}function Ur(g){return g===""?null:+g}var hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vi(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var Jn={exports:{}},pi=Jn.exports,za;function yi(){return za||(za=1,(function(g,v){(function(x,w){g.exports=w()})(pi,function(){var x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(e,t)},w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function T(e,t,n){for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:hi,P=Object.keys,A=Array.isArray;function te(e,t){return typeof t!="object"||P(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||O.Promise||(O.Promise=Promise);var re=Object.getPrototypeOf,le={}.hasOwnProperty;function ie(e,t){return le.call(e,t)}function me(e,t){typeof t=="function"&&(t=t(re(e))),(typeof Reflect>"u"?P:Reflect.ownKeys)(t).forEach(function(n){W(e,n,t[n])})}var xe=Object.defineProperty;function W(e,t,n,r){xe(e,t,te(n&&ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function X(e){return{from:function(t){return e.prototype=Object.create(t.prototype),W(e.prototype,"constructor",e),{extend:me.bind(null,e.prototype)}}}}var ae=Object.getOwnPropertyDescriptor,ge=[].slice;function be(e,t,n){return ge.call(e,t,n)}function H(e,t){return t(e)}function V(e){if(!e)throw new Error("Assertion Failed")}function G(e){O.setImmediate?setImmediate(e):setTimeout(e,0)}function q(e,t){if(typeof t=="string"&&ie(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var o=q(e,t[r]);n.push(o)}return n}var i=t.indexOf(".");if(i!==-1){var s=e[t.substr(0,i)];return s==null?void 0:q(s,t.substr(i+1))}}function R(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){V(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)R(e,t[r],n[r])}else{var o,i,s=t.indexOf(".");s!==-1?(o=t.substr(0,s),(i=t.substr(s+1))===""?n===void 0?A(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n:R(s=!(s=e[o])||!ie(e,o)?e[o]={}:s,i,n)):n===void 0?A(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function M(e){var t,n={};for(t in e)ie(e,t)&&(n[t]=e[t]);return n}var J=[].concat;function ye(e){return J.apply([],e)}var Te="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ye([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return O[e]}),ce=new Set(Te.map(function(e){return O[e]})),se=null;function we(e){return se=new WeakMap,e=(function t(n){if(!n||typeof n!="object")return n;var r=se.get(n);if(r)return r;if(A(n)){r=[],se.set(n,r);for(var a=0,o=n.length;a<o;++a)r.push(t(n[a]))}else if(ce.has(n.constructor))r=n;else{var i,s=re(n);for(i in r=s===Object.prototype?{}:Object.create(s),se.set(n,r),n)ie(n,i)&&(r[i]=t(n[i]))}return r})(e),se=null,e}var qe={}.toString;function ke(e){return qe.call(e).slice(8,-1)}var Ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",lt=typeof Ie=="symbol"?function(e){var t;return e!=null&&(t=e[Ie])&&t.apply(e)}:function(){return null};function Be(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var He={};function We(e){var t,n,r,a;if(arguments.length===1){if(A(e))return e.slice();if(this===He&&typeof e=="string")return[e];if(a=lt(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var xt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},jt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ot=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(jt),Vt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Se(e,t){this.name=e,this.message=t}function rt(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function ft(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=rt(e,t)}function Q(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=rt(e,this.failures)}X(Se).from(Error).extend({toString:function(){return this.name+": "+this.message}}),X(ft).from(Se),X(Q).from(Se);var he=ot.reduce(function(e,t){return e[t]=t+"Error",e},{}),Qe=Se,z=ot.reduce(function(e,t){var n=t+"Error";function r(a,o){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(o?`
 `+o:""),this.inner=o||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=Vt[t]||n,this.inner=null)}return X(r).from(Qe),e[t]=r,e},{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var Oe=jt.reduce(function(e,t){return e[t+"Error"]=z[t],e},{}),at=ot.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=z[t]),e},{});function de(){}function dt(e){return e}function Tt(e,t){return e==null||e===dt?t:function(n){return t(e(n))}}function Ye(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Pn(e,t){return e===de?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ye(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Ye(a,this.onerror):a),o!==void 0?o:n}}function Sn(e,t){return e===de?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ye(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ye(r,this.onerror):r)}}function ur(e,t){return e===de?t:function(n){var r=e.apply(this,arguments);te(n,r);var a=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Ye(a,this.onsuccess):a),o&&(this.onerror=this.onerror?Ye(o,this.onerror):o),r===void 0?n===void 0?void 0:n:te(r,n)}}function cr(e,t){return e===de?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function on(e,t){return e===de?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}at.ModifyError=ft,at.DexieError=Se,at.BulkError=Q;var Xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Dt(e){Xe=e}var It={},sn=100,Te=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,re(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,re(t),e]})(),jt=Te[0],ot=Te[1],Te=Te[2],ot=ot&&ot.then,Ve=jt&&jt.constructor,$t=!!Te,un=function(e,t){cn.push([e,t]),On&&(queueMicrotask(oo),On=!1)},lr=!0,On=!0,Nt=[],An=[],fr=dt,kt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:de,pgp:!1,env:{},finalize:de},U=kt,cn=[],Mt=0,Cn=[];function N(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=U;if(typeof e!="function"){if(e!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&hr(this,this._value))}this._state=null,this._value=null,++t.ref,(function n(r,a){try{a(function(o){if(r._state===null){if(o===r)throw new TypeError("A promise cannot be resolved with itself.");var i=r._lib&&Ut();o&&typeof o.then=="function"?n(r,function(s,c){o instanceof N?o._then(s,c):o.then(s,c)}):(r._state=!0,r._value=o,aa(r)),i&&Ht()}},hr.bind(null,r))}catch(o){hr(r,o)}})(this,e)}var dr={get:function(){var e=U,t=In;function n(r,a){var o=this,i=!e.global&&(e!==U||t!==In),s=i&&!Pt(),c=new N(function(l,p){vr(o,new ra(ia(r,e,i,s),ia(a,e,i,s),l,p,e))});return this._consoleTask&&(c._consoleTask=this._consoleTask),c}return n.prototype=It,n},set:function(e){W(this,"then",e&&e.prototype===It?dr:{get:function(){return e},set:dr.set})}};function ra(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}function hr(e,t){var n,r;An.push(t),e._state===null&&(n=e._lib&&Ut(),t=fr(t),e._state=!1,e._value=t,r=e,Nt.some(function(a){return a._value===r._value})||Nt.push(r),aa(e),n&&Ht())}function aa(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)vr(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),Mt===0&&(++Mt,un(function(){--Mt==0&&pr()},[]))}function vr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Mt,un(ao,[n,e,t])}else e._listeners.push(t)}function ao(e,t,n){try{var r,a=t._value;!t._state&&An.length&&(An=[]),r=Xe&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||An.indexOf(a)!==-1||(function(o){for(var i=Nt.length;i;)if(Nt[--i]._value===o._value)return Nt.splice(i,1)})(t),n.resolve(r)}catch(o){n.reject(o)}finally{--Mt==0&&pr(),--n.psd.ref||n.psd.finalize()}}function oo(){qt(kt,function(){Ut()&&Ht()})}function Ut(){var e=lr;return On=lr=!1,e}function Ht(){var e,t,n;do for(;0<cn.length;)for(e=cn,cn=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<cn.length);On=lr=!0}function pr(){var e=Nt;Nt=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Cn.slice(0),n=t.length;n;)t[--n]()}function Kn(e){return new N(It,!1,e)}function Ee(e,t){var n=U;return function(){var r=Ut(),a=U;try{return St(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{St(a,!1),r&&Ht()}}}me(N.prototype,{then:dr,_then:function(e,t){vr(this,new ra(null,null,e,t,U))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Kn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Kn)(r)})},finally:function(e){return this.then(function(t){return N.resolve(e()).then(function(){return t})},function(t){return N.resolve(e()).then(function(){return Kn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new N(function(r,a){var o=setTimeout(function(){return a(new z.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&W(N.prototype,Symbol.toStringTag,"Dexie.Promise"),kt.env=oa(),me(N,{all:function(){var e=We.apply(null,arguments).map(jn);return new N(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,o){return N.resolve(a).then(function(i){e[o]=i,--r||t(e)},n)})})},resolve:function(e){return e instanceof N?e:e&&typeof e.then=="function"?new N(function(t,n){e.then(t,n)}):new N(It,!0,e)},reject:Kn,race:function(){var e=We.apply(null,arguments).map(jn);return new N(function(t,n){e.map(function(r){return N.resolve(r).then(t,n)})})},PSD:{get:function(){return U},set:function(e){return U=e}},totalEchoes:{get:function(){return In}},newPSD:Et,usePSD:qt,scheduler:{get:function(){return un},set:function(e){un=e}},rejectionMapper:{get:function(){return fr},set:function(e){fr=e}},follow:function(e,t){return new N(function(n,r){return Et(function(a,o){var i=U;i.unhandleds=[],i.onunhandled=o,i.finalize=Ye(function(){var s,c=this;s=function(){c.unhandleds.length===0?a():o(c.unhandleds[0])},Cn.push(function l(){s(),Cn.splice(Cn.indexOf(l),1)}),++Mt,un(function(){--Mt==0&&pr()},[])},i.finalize),e()},t,n,r)})}}),Ve&&(Ve.allSettled&&W(N,"allSettled",function(){var e=We.apply(null,arguments).map(jn);return new N(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,o){return N.resolve(a).then(function(i){return r[o]={status:"fulfilled",value:i}},function(i){return r[o]={status:"rejected",reason:i}}).then(function(){return--n||t(r)})})})}),Ve.any&&typeof AggregateError<"u"&&W(N,"any",function(){var e=We.apply(null,arguments).map(jn);return new N(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(o,i){return N.resolve(o).then(function(s){return t(s)},function(s){a[i]=s,--r||n(new AggregateError(a))})})})}),Ve.withResolvers&&(N.withResolvers=Ve.withResolvers));var je={awaits:0,echoes:0,id:0},io=0,Tn=[],Dn=0,In=0,so=0;function Et(e,t,n,r){var a=U,o=Object.create(a);return o.parent=a,o.ref=0,o.global=!1,o.id=++so,kt.env,o.env=$t?{Promise:N,PromiseProp:{value:N,configurable:!0,writable:!0},all:N.all,race:N.race,allSettled:N.allSettled,any:N.any,resolve:N.resolve,reject:N.reject}:{},t&&te(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},r=qt(o,e,n,r),o.ref===0&&o.finalize(),r}function Yt(){return je.id||(je.id=++io),++je.awaits,je.echoes+=sn,je.id}function Pt(){return!!je.awaits&&(--je.awaits==0&&(je.id=0),je.echoes=je.awaits*sn,!0)}function jn(e){return je.echoes&&e&&e.constructor===Ve?(Yt(),e.then(function(t){return Pt(),t},function(t){return Pt(),Ce(t)})):e}function uo(){var e=Tn[Tn.length-1];Tn.pop(),St(e,!1)}function St(e,t){var n,r=U;(t?!je.echoes||Dn++&&e===U:!Dn||--Dn&&e===U)||queueMicrotask(t?(function(a){++In,je.echoes&&--je.echoes!=0||(je.echoes=je.awaits=je.id=0),Tn.push(U),St(a,!0)}).bind(null,e):uo),e!==U&&(U=e,r===kt&&(kt.env=oa()),$t&&(n=kt.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(O,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function oa(){var e=O.Promise;return $t?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(O,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function qt(e,t,n,r,a){var o=U;try{return St(e,!0),t(n,r,a)}finally{St(o,!1)}}function ia(e,t,n,r){return typeof e!="function"?e:function(){var a=U;n&&Yt(),St(t,!0);try{return e.apply(this,arguments)}finally{St(a,!1),r&&queueMicrotask(Pt)}}}function yr(e){Promise===Ve&&je.echoes===0?Dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ot).indexOf("[native code]")===-1&&(Yt=Pt=de);var Ce=N.reject,Bt="￿",bt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",sa="String expected.",Gt=[],$n="__dbnames",mr="readonly",gr="readwrite";function Rt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ua={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=we(t))[e],t}}function ca(){throw z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function fe(e,t){try{var n=la(e),r=la(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return(function(a,o){for(var i=a.length,s=o.length,c=i<s?i:s,l=0;l<c;++l)if(a[l]!==o[l])return a[l]<o[l]?-1:1;return i===s?0:i<s?-1:1})(fa(e),fa(t));case"Array":return(function(a,o){for(var i=a.length,s=o.length,c=i<s?i:s,l=0;l<c;++l){var p=fe(a[l],o[l]);if(p!==0)return p}return i===s?0:i<s?-1:1})(e,t)}}catch{}return NaN}function la(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=ke(e),e==="ArrayBuffer"?"binary":e)}function fa(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Mn(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(a,o){return!n.failures[o]})),Promise.all(r.map(function(a){return a=a.updatesTable,t?e.db.table(a).where("k").anyOf(t).delete():e.db.table(a).clear()})).then(function(){return n})):n}var ln=(da.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(A(n))return T(T([],A(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(A(r))return A(e)?e.filter(function(a){return!r.includes(a)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},da);function da(e){this["@@propmod"]=e}function ha(e,t){for(var n=P(t),r=n.length,a=!1,o=0;o<r;++o){var i=n[o],s=t[i],c=q(e,i);s instanceof ln?(R(e,i,s.execute(c)),a=!0):c!==s&&(R(e,i,s),a=!0)}return a}var va=(_e.prototype._trans=function(e,t,n){var r=this._tx||U.trans,a=this.name,o=Xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function i(l,p,u){if(!u.schema[a])throw new z.NotFound("Table "+a+" not part of transaction");return t(u.idbtrans,u)}var s=Ut();try{var c=r&&r.db._novip===this.db._novip?r===U.trans?r._promise(e,i,n):Et(function(){return r._promise(e,i,n)},{trans:r,transless:U.transless||U}):(function l(p,u,m,f){if(p.idbdb&&(p._state.openComplete||U.letThrough||p._vip)){var d=p._createTransaction(u,m,p._dbSchema);try{d.create(),p._state.PR1398_maxLoop=3}catch(h){return h.name===he.InvalidState&&p.isOpen()&&0<--p._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),p.close({disableAutoOpen:!1}),p.open().then(function(){return l(p,u,m,f)})):Ce(h)}return d._promise(u,function(h,y){return Et(function(){return U.trans=d,f(h,y,d)})}).then(function(h){if(u==="readwrite")try{d.idbtrans.commit()}catch{}return u==="readonly"?h:d._completion.then(function(){return h})})}if(p._state.openComplete)return Ce(new z.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return Ce(new z.DatabaseClosed);p.open().catch(de)}return p._state.dbReadyPromise.then(function(){return l(p,u,m,f)})})(this.db,e,[this.name],i);return o&&(c._consoleTask=o,c=c.catch(function(l){return console.trace(l),Ce(l)})),c}finally{s&&Ht()}},_e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ce(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(a){return n.hook.reading.fire(a)})}).then(t)},_e.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(A(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=P(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(s){if(s.compound&&t.every(function(l){return 0<=s.keyPath.indexOf(l)})){for(var c=0;c<t.length;++c)if(t.indexOf(s.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(s,c){return s.keyPath.length-c.keyPath.length})[0];if(n&&this.db._maxKey!==Bt){var o=n.keyPath.slice(0,t.length);return this.where(o).equals(o.map(function(c){return e[c]}))}!n&&Xe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function a(s,c){return fe(s,c)===0}var i=t.reduce(function(u,c){var l=u[0],p=u[1],u=r[c],m=e[c];return[l||u,l||!u?Rt(p,u&&u.multi?function(f){return f=q(f,c),A(f)&&f.some(function(d){return a(m,d)})}:function(f){return a(m,q(f,c))}):p]},[null,null]),o=i[0],i=i[1];return o?this.where(o.name).equals(e[o.keyPath]).filter(i):n?this.filter(i):this.where(t).equals("")},_e.prototype.filter=function(e){return this.toCollection().and(e)},_e.prototype.count=function(e){return this.toCollection().count(e)},_e.prototype.offset=function(e){return this.toCollection().offset(e)},_e.prototype.limit=function(e){return this.toCollection().limit(e)},_e.prototype.each=function(e){return this.toCollection().each(e)},_e.prototype.toArray=function(e){return this.toCollection().toArray(e)},_e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,A(e)?"[".concat(e.join("+"),"]"):e))},_e.prototype.reverse=function(){return this.toCollection().reverse()},_e.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function a(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof ca&&((function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=c}x(c,l),c.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)})(a,t=e),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return r},e=a);for(var o=new Set,i=e.prototype;i;i=re(i))Object.getOwnPropertyNames(i).forEach(function(c){return o.add(c)});function s(c){if(!c)return c;var l,p=Object.create(e.prototype);for(l in c)if(!o.has(l))try{p[l]=c[l]}catch{}return p}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=s,this.hook("reading",s),e},_e.prototype.defineClass=function(){return this.mapToClass(function(e){te(this,e)})},_e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=Nn(o)(e)),this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"add",keys:t!=null?[t]:null,values:[i]})}).then(function(s){return s.numFailures?N.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{R(e,o,s)}catch{}return s})},_e.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return n.core.get({trans:a,key:e}).then(function(o){var i=o??{};return ha(i,t),r&&R(i,r,e),n.core.mutate({trans:a,type:"put",values:[i],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(s){return s.numFailures?N.reject(s.failures[0]):!!o})})})},_e.prototype.update=function(e,t){return typeof e!="object"||A(e)?this.where(":id").equals(e).modify(t):(e=q(e,this.schema.primKey.keyPath),e===void 0?Ce(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},_e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=Nn(o)(e)),this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"put",values:[i],keys:t!=null?[t]:null})}).then(function(s){return s.numFailures?N.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{R(e,o,s)}catch{}return s})},_e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(r){return Mn(t,[e],r)}).then(function(r){return r.numFailures?N.reject(r.failures[0]):void 0})})},_e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ua}).then(function(n){return Mn(e,null,n)})}).then(function(t){return t.numFailures?N.reject(t.failures[0]):void 0})},_e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(a){return t.hook.reading.fire(a)})})})},_e.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(i){var l=r.schema.primKey,s=l.auto,l=l.keyPath;if(l&&a)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,l=l&&s?e.map(Nn(l)):e;return r.core.mutate({trans:i,type:"add",keys:a,values:l,wantResults:o}).then(function(d){var u=d.numFailures,m=d.results,f=d.lastResult,d=d.failures;if(u===0)return o?m:f;throw new Q("".concat(r.name,".bulkAdd(): ").concat(u," of ").concat(c," operations failed"),d)})})},_e.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(i){var l=r.schema.primKey,s=l.auto,l=l.keyPath;if(l&&a)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,l=l&&s?e.map(Nn(l)):e;return r.core.mutate({trans:i,type:"put",keys:a,values:l,wantResults:o}).then(function(d){var u=d.numFailures,m=d.results,f=d.lastResult,d=d.failures;if(u===0)return o?m:f;throw new Q("".concat(r.name,".bulkPut(): ").concat(u," of ").concat(c," operations failed"),d)})})},_e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(i){return i.key}),a=e.map(function(i){return i.changes}),o=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(s){var c=[],l=[];e.forEach(function(u,m){var f=u.key,d=u.changes,h=s[m];if(h){for(var y=0,b=Object.keys(d);y<b.length;y++){var _=b[y],k=d[_];if(_===t.schema.primKey.keyPath){if(fe(k,f)!==0)throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else R(h,_,k)}o.push(m),c.push(f),l.push(h)}});var p=c.length;return n.mutate({trans:i,type:"put",keys:c,values:l,updates:{keys:r,changeSpecs:a}}).then(function(u){var m=u.numFailures,f=u.failures;if(m===0)return p;for(var d=0,h=Object.keys(f);d<h.length;d++){var y,b=h[d],_=o[Number(b)];_!=null&&(y=f[b],delete f[b],f[_]=y)}throw new Q("".concat(t.name,".bulkUpdate(): ").concat(m," of ").concat(p," operations failed"),f)})})})},_e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(a){return Mn(t,e,a)})}).then(function(i){var a=i.numFailures,o=i.lastResult,i=i.failures;if(a===0)return o;throw new Q("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),i)})},_e);function _e(){}function fn(e){function t(i,s){if(s){for(var c=arguments.length,l=new Array(c-1);--c;)l[c-1]=arguments[c];return n[i].subscribe.apply(null,l),e}if(typeof i=="string")return n[i]}var n={};t.addEventType=o;for(var r=1,a=arguments.length;r<a;++r)o(arguments[r]);return t;function o(i,s,c){if(typeof i!="object"){var l;s=s||cr;var p={subscribers:[],fire:c=c||de,subscribe:function(u){p.subscribers.indexOf(u)===-1&&(p.subscribers.push(u),p.fire=s(p.fire,u))},unsubscribe:function(u){p.subscribers=p.subscribers.filter(function(m){return m!==u}),p.fire=p.subscribers.reduce(s,c)}};return n[i]=t[i]=p}P(l=i).forEach(function(u){var m=l[u];if(A(m))o(u,l[u][0],l[u][1]);else{if(m!=="asap")throw new z.InvalidArgument("Invalid event config");var f=o(u,dt,function(){for(var d=arguments.length,h=new Array(d);d--;)h[d]=arguments[d];f.subscribers.forEach(function(y){G(function(){y.apply(null,h)})})})}})}}function dn(e,t){return X(t).from({prototype:e}),t}function Qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function br(e,t){e.filter=Rt(e.filter,t)}function _r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Rt(r(),t())}:t,e.justLimit=n&&!r}function qn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new z.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function pa(e,t,n){var r=qn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Bn(e,t,n,r){var a=e.replayFilter?Rt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},i=function(s,c,l){var p,u;a&&!a(c,l,function(m){return c.stop(m)},function(m){return c.fail(m)})||((u=""+(p=c.primaryKey))=="[object ArrayBuffer]"&&(u=""+new Uint8Array(p)),ie(o,u)||(o[u]=!0,t(s,c,l)))};return Promise.all([e.or._iterate(i,n),ya(pa(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return ya(pa(e,r,n),Rt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function ya(e,t,n,r){var a=Ee(r?function(o,i,s){return n(r(o),i,s)}:n);return e.then(function(o){if(o)return o.start(function(){var i=function(){return o.continue()};t&&!t(o,function(s){return i=s},function(s){o.stop(s),i=de},function(s){o.fail(s),i=de})||a(o.value,o,function(s){return i=s}),i()})})}var co=(ve.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ce.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ve.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ce.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ve.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Rt(t.algorithm,e)},ve.prototype._iterate=function(e,t){return Bn(this._ctx,e,t,this._ctx.table.core)},ve.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&te(n,e),t._ctx=n,t},ve.prototype.raw=function(){return this._ctx.valueMapper=null,this},ve.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Bn(t,e,n,t.table.core)})},ve.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,a=r.table.core;if(Qt(r,!0))return a.count({trans:n,query:{index:qn(r,a.schema),range:r.range}}).then(function(i){return Math.min(i,r.limit)});var o=0;return Bn(r,function(){return++o,!1},n,a).then(function(){return o})}).then(e)},ve.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function o(c,l){return l?o(c[n[l]],l-1):c[r]}var i=this._ctx.dir==="next"?1:-1;function s(c,l){return fe(o(c,a),o(l,a))*i}return this.toArray(function(c){return c.sort(s)}).then(t)},ve.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&Qt(r,!0)&&0<r.limit){var a=r.valueMapper,o=qn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(function(s){return s=s.result,a?s.map(a):s})}var i=[];return Bn(r,function(s){return i.push(s)},n,r.table.core).then(function(){return i})},e)},ve.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Qt(t)?_r(t,function(){var n=e;return function(r,a){return n===0||(n===1?--n:a(function(){r.advance(n),n=0}),!1)}}):_r(t,function(){var n=e;return function(){return--n<0}})),this},ve.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_r(this._ctx,function(){var t=e;return function(n,r,a){return--t<=0&&r(a),0<=t}},!0),this},ve.prototype.until=function(e,t){return br(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},ve.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ve.prototype.last=function(e){return this.reverse().first(e)},ve.prototype.filter=function(e){var t;return br(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Rt(t.isMatch,e),this},ve.prototype.and=function(e){return this.filter(e)},ve.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ve.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ve.prototype.desc=function(){return this.reverse()},ve.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ve.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ve.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ve.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.key)}).then(function(){return n}).then(e)},ve.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Qt(t,!0)&&0<t.limit)return this._read(function(r){var a=qn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.primaryKey)}).then(function(){return n}).then(e)},ve.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ve.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ve.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ve.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return br(this._ctx,function(a){var r=a.primaryKey.toString(),a=ie(t,r);return t[r]=!0,!a}),this},ve.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a=typeof e=="function"?e:function(h){return ha(h,e)},o=n.table.core,l=o.schema.primaryKey,i=l.outbound,s=l.extractKey,c=200,l=t.db._options.modifyChunkSize;l&&(c=typeof l=="object"?l[o.name]||l["*"]||200:l);function p(h,_){var b=_.failures,_=_.numFailures;m+=h-_;for(var k=0,E=P(b);k<E.length;k++){var K=E[k];u.push(b[K])}}var u=[],m=0,f=[],d=e===ma;return t.clone().primaryKeys().then(function(h){function y(_){var k=Math.min(c,h.length-_),E=h.slice(_,_+k);return(d?Promise.resolve([]):o.getMany({trans:r,keys:E,cache:"immutable"})).then(function(K){var j=[],C=[],D=i?[]:null,$=d?E:[];if(!d)for(var I=0;I<k;++I){var B=K[I],ee={value:we(B),primKey:h[_+I]};a.call(ee,ee.value,ee)!==!1&&(ee.value==null?$.push(h[_+I]):i||fe(s(B),s(ee.value))===0?(C.push(ee.value),i&&D.push(h[_+I])):($.push(h[_+I]),j.push(ee.value)))}return Promise.resolve(0<j.length&&o.mutate({trans:r,type:"add",values:j}).then(function(ne){for(var ue in ne.failures)$.splice(parseInt(ue),1);p(j.length,ne)})).then(function(){return(0<C.length||b&&typeof e=="object")&&o.mutate({trans:r,type:"put",keys:D,values:C,criteria:b,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<_}).then(function(ne){return p(C.length,ne)})}).then(function(){return(0<$.length||b&&d)&&o.mutate({trans:r,type:"delete",keys:$,criteria:b,isAdditionalChunk:0<_}).then(function(ne){return Mn(n.table,$,ne)}).then(function(ne){return p($.length,ne)})}).then(function(){return h.length>_+k&&y(_+c)})})}var b=Qt(n)&&n.limit===1/0&&(typeof e!="function"||d)&&{index:n.index,range:n.range};return y(0).then(function(){if(0<u.length)throw new ft("Error modifying one or more objects",u,m,f);return h.length})})})},ve.prototype.delete=function(){var e=this._ctx,t=e.range;return!Qt(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(ma):this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(o){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(c){var s=c.failures,c=c.numFailures;if(c)throw new ft("Could not delete some values",Object.keys(s).map(function(l){return s[l]}),o-c);return o-c})})})},ve);function ve(){}var ma=function(e,t){return t.value=null};function lo(e,t){return e<t?-1:e===t?0:1}function fo(e,t){return t<e?-1:e===t?0:1}function Ze(e,t,n){return e=e instanceof ba?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function Xt(e){return new e.Collection(e,function(){return ga("")}).limit(0)}function Rn(e,t,n,r){var a,o,i,s,c,l,p,u=n.length;if(!n.every(function(d){return typeof d=="string"}))return Ze(e,sa);function m(d){a=d==="next"?function(y){return y.toUpperCase()}:function(y){return y.toLowerCase()},o=d==="next"?function(y){return y.toLowerCase()}:function(y){return y.toUpperCase()},i=d==="next"?lo:fo;var h=n.map(function(y){return{lower:o(y),upper:a(y)}}).sort(function(y,b){return i(y.lower,b.lower)});s=h.map(function(y){return y.upper}),c=h.map(function(y){return y.lower}),p=(l=d)==="next"?"":r}m("next"),e=new e.Collection(e,function(){return Ot(s[0],c[u-1]+r)}),e._ondirectionchange=function(d){m(d)};var f=0;return e._addAlgorithm(function(d,h,y){var b=d.key;if(typeof b!="string")return!1;var _=o(b);if(t(_,c,f))return!0;for(var k=null,E=f;E<u;++E){var K=(function(j,C,D,$,I,B){for(var ee=Math.min(j.length,$.length),ne=-1,ue=0;ue<ee;++ue){var Je=C[ue];if(Je!==$[ue])return I(j[ue],D[ue])<0?j.substr(0,ue)+D[ue]+D.substr(ue+1):I(j[ue],$[ue])<0?j.substr(0,ue)+$[ue]+D.substr(ue+1):0<=ne?j.substr(0,ne)+C[ne]+D.substr(ne+1):null;I(j[ue],Je)<0&&(ne=ue)}return ee<$.length&&B==="next"?j+D.substr(j.length):ee<j.length&&B==="prev"?j.substr(0,D.length):ne<0?null:j.substr(0,ne)+$[ne]+D.substr(ne+1)})(b,_,s[E],c[E],i,l);K===null&&k===null?f=E+1:(k===null||0<i(k,K))&&(k=K)}return h(k!==null?function(){d.continue(k+p)}:y),!1}),e}function Ot(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ga(e){return{type:1,lower:e,upper:e}}var ba=(Object.defineProperty($e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$e.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?Xt(this):new this.Collection(this,function(){return Ot(e,t,!n,!r)})}catch{return Ze(this,bt)}},$e.prototype.equals=function(e){return e==null?Ze(this,bt):new this.Collection(this,function(){return ga(e)})},$e.prototype.above=function(e){return e==null?Ze(this,bt):new this.Collection(this,function(){return Ot(e,void 0,!0)})},$e.prototype.aboveOrEqual=function(e){return e==null?Ze(this,bt):new this.Collection(this,function(){return Ot(e,void 0,!1)})},$e.prototype.below=function(e){return e==null?Ze(this,bt):new this.Collection(this,function(){return Ot(void 0,e,!1,!0)})},$e.prototype.belowOrEqual=function(e){return e==null?Ze(this,bt):new this.Collection(this,function(){return Ot(void 0,e)})},$e.prototype.startsWith=function(e){return typeof e!="string"?Ze(this,sa):this.between(e,e+Bt,!0,!0)},$e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Rn(this,function(t,n){return t.indexOf(n[0])===0},[e],Bt)},$e.prototype.equalsIgnoreCase=function(e){return Rn(this,function(t,n){return t===n[0]},[e],"")},$e.prototype.anyOfIgnoreCase=function(){var e=We.apply(He,arguments);return e.length===0?Xt(this):Rn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},$e.prototype.startsWithAnyOfIgnoreCase=function(){var e=We.apply(He,arguments);return e.length===0?Xt(this):Rn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Bt)},$e.prototype.anyOf=function(){var e=this,t=We.apply(He,arguments),n=this._cmp;try{t.sort(n)}catch{return Ze(this,bt)}if(t.length===0)return Xt(this);var r=new this.Collection(this,function(){return Ot(t[0],t[t.length-1])});r._ondirectionchange=function(o){n=o==="next"?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(o,i,s){for(var c=o.key;0<n(c,t[a]);)if(++a===t.length)return i(s),!1;return n(c,t[a])===0||(i(function(){o.continue(t[a])}),!1)}),r},$e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$e.prototype.noneOf=function(){var e=We.apply(He,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ze(this,bt)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},$e.prototype.inAnyRange=function(b,t){var n=this,r=this._cmp,a=this._ascending,o=this._descending,i=this._min,s=this._max;if(b.length===0)return Xt(this);if(!b.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&a(_[0],_[1])<=0}))return Ze(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var c=!t||t.includeLowers!==!1,l=t&&t.includeUppers===!0,p,u=a;function m(_,k){return u(_[0],k[0])}try{(p=b.reduce(function(_,k){for(var E=0,K=_.length;E<K;++E){var j=_[E];if(r(k[0],j[1])<0&&0<r(k[1],j[0])){j[0]=i(j[0],k[0]),j[1]=s(j[1],k[1]);break}}return E===K&&_.push(k),_},[])).sort(m)}catch{return Ze(this,bt)}var f=0,d=l?function(_){return 0<a(_,p[f][1])}:function(_){return 0<=a(_,p[f][1])},h=c?function(_){return 0<o(_,p[f][0])}:function(_){return 0<=o(_,p[f][0])},y=d,b=new this.Collection(this,function(){return Ot(p[0][0],p[p.length-1][1],!c,!l)});return b._ondirectionchange=function(_){u=_==="next"?(y=d,a):(y=h,o),p.sort(m)},b._addAlgorithm(function(_,k,E){for(var K,j=_.key;y(j);)if(++f===p.length)return k(E),!1;return!d(K=j)&&!h(K)||(n._cmp(j,p[f][1])===0||n._cmp(j,p[f][0])===0||k(function(){u===a?_.continue(p[f][0]):_.continue(p[f][1])}),!1)}),b},$e.prototype.startsWithAnyOf=function(){var e=We.apply(He,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Xt(this):this.inAnyRange(e.map(function(t){return[t,t+Bt]})):Ze(this,"startsWithAnyOf() only works with strings")},$e);function $e(){}function ht(e){return Ee(function(t){return hn(t),e(t.target.error),!1})}function hn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var vn="storagemutated",wr="x-storagemutated-1",At=fn(null,vn),ho=(vt.prototype._lock=function(){return V(!U.global),++this._reculock,this._reculock!==1||U.global||(U.lockOwnerFor=this),this},vt.prototype._unlock=function(){if(V(!U.global),--this._reculock==0)for(U.global||(U.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{qt(e[1],e[0])}catch{}}return this},vt.prototype._locked=function(){return this._reculock&&U.lockOwnerFor!==this},vt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(V(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new z.DatabaseClosed(r);case"MissingAPIError":throw new z.MissingAPI(r.message,r);default:throw new z.OpenFailed(r)}if(!this.active)throw new z.TransactionInactive;return V(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ee(function(a){hn(a),t._reject(e.error)}),e.onabort=Ee(function(a){hn(a),t.active&&t._reject(new z.Abort(e.error)),t.active=!1,t.on("abort").fire(a)}),e.oncomplete=Ee(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&At.storagemutated.fire(e.mutatedParts)}),this},vt.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return Ce(new z.ReadOnly("Transaction is readonly"));if(!this.active)return Ce(new z.TransactionInactive);if(this._locked())return new N(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},U])});if(n)return Et(function(){var o=new N(function(i,s){r._lock();var c=t(i,s,r);c&&c.then&&c.then(i,s)});return o.finally(function(){return r._unlock()}),o._lib=!0,o});var a=new N(function(o,i){var s=t(o,i,r);s&&s.then&&s.then(o,i)});return a._lib=!0,a},vt.prototype._root=function(){return this.parent?this.parent._root():this},vt.prototype.waitFor=function(e){var t,n=this._root(),r=N.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=o)})());var a=n._waitingFor;return new N(function(o,i){r.then(function(s){return n._waitingQueue.push(Ee(o.bind(null,s)))},function(s){return n._waitingQueue.push(Ee(i.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},vt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ie(t,e))return t[e];var n=this.schema[e];if(!n)throw new z.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},vt);function vt(){}function xr(e,t,n,r,a,o,i,s){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:o,src:(n&&!i?"&":"")+(r?"*":"")+(a?"++":"")+_a(t),type:s}}function _a(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function kr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(a){return[a.name,a]},n.reduce(function(a,o,i){return i=r(o,i),i&&(a[i[0]]=i[1]),a},{}))};var r}var pn=function(e){try{return e.only([[]]),pn=function(){return[[]]},[[]]}catch{return pn=function(){return Bt},Bt}};function Er(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return q(n,t)}:function(n){return q(n,e)};var t}function wa(e){return[].slice.call(e)}var vo=0;function yn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function po(e,t,c){function r(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var f=y.lower,d=y.upper,h=y.lowerOpen,y=y.upperOpen;return f===void 0?d===void 0?null:t.upperBound(d,!!y):d===void 0?t.lowerBound(f,!!h):t.bound(f,d,!!h,!!y)}function a(m){var f,d=m.name;return{name:d,schema:m,mutate:function(h){var y=h.trans,b=h.type,_=h.keys,k=h.values,E=h.range;return new Promise(function(K,j){K=Ee(K);var C=y.objectStore(d),D=C.keyPath==null,$=b==="put"||b==="add";if(!$&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var I,B=(_||k||{length:1}).length;if(_&&k&&_.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function ee(Ue){++Je,hn(Ue)}var ne=[],ue=[],Je=0;if(b==="deleteRange"){if(E.type===4)return K({numFailures:Je,failures:ue,results:[],lastResult:void 0});E.type===3?ne.push(I=C.clear()):ne.push(I=C.delete(r(E)))}else{var D=$?D?[k,_]:[k,null]:[_,null],Z=D[0],Fe=D[1];if($)for(var ze=0;ze<B;++ze)ne.push(I=Fe&&Fe[ze]!==void 0?C[b](Z[ze],Fe[ze]):C[b](Z[ze])),I.onerror=ee;else for(ze=0;ze<B;++ze)ne.push(I=C[b](Z[ze])),I.onerror=ee}function Zn(Ue){Ue=Ue.target.result,ne.forEach(function(Lt,zr){return Lt.error!=null&&(ue[zr]=Lt.error)}),K({numFailures:Je,failures:ue,results:b==="delete"?_:ne.map(function(Lt){return Lt.result}),lastResult:Ue})}I.onerror=function(Ue){ee(Ue),Zn(Ue)},I.onsuccess=Zn})},getMany:function(h){var y=h.trans,b=h.keys;return new Promise(function(_,k){_=Ee(_);for(var E,K=y.objectStore(d),j=b.length,C=new Array(j),D=0,$=0,I=function(ne){ne=ne.target,C[ne._pos]=ne.result,++$===D&&_(C)},B=ht(k),ee=0;ee<j;++ee)b[ee]!=null&&((E=K.get(b[ee]))._pos=ee,E.onsuccess=I,E.onerror=B,++D);D===0&&_(C)})},get:function(h){var y=h.trans,b=h.key;return new Promise(function(_,k){_=Ee(_);var E=y.objectStore(d).get(b);E.onsuccess=function(K){return _(K.target.result)},E.onerror=ht(k)})},query:(f=l,function(h){return new Promise(function(y,b){y=Ee(y);var _,k,E,D=h.trans,K=h.values,j=h.limit,I=h.query,C=j===1/0?void 0:j,$=I.index,I=I.range,D=D.objectStore(d),$=$.isPrimaryKey?D:D.index($.name),I=r(I);if(j===0)return y({result:[]});f?((C=K?$.getAll(I,C):$.getAllKeys(I,C)).onsuccess=function(B){return y({result:B.target.result})},C.onerror=ht(b)):(_=0,k=!K&&"openKeyCursor"in $?$.openKeyCursor(I):$.openCursor(I),E=[],k.onsuccess=function(B){var ee=k.result;return ee?(E.push(K?ee.value:ee.primaryKey),++_===j?y({result:E}):void ee.continue()):y({result:E})},k.onerror=ht(b))})}),openCursor:function(h){var y=h.trans,b=h.values,_=h.query,k=h.reverse,E=h.unique;return new Promise(function(K,j){K=Ee(K);var $=_.index,C=_.range,D=y.objectStore(d),D=$.isPrimaryKey?D:D.index($.name),$=k?E?"prevunique":"prev":E?"nextunique":"next",I=!b&&"openKeyCursor"in D?D.openKeyCursor(r(C),$):D.openCursor(r(C),$);I.onerror=ht(j),I.onsuccess=Ee(function(B){var ee,ne,ue,Je,Z=I.result;Z?(Z.___id=++vo,Z.done=!1,ee=Z.continue.bind(Z),ne=(ne=Z.continuePrimaryKey)&&ne.bind(Z),ue=Z.advance.bind(Z),Je=function(){throw new Error("Cursor not stopped")},Z.trans=y,Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=function(){throw new Error("Cursor not started")},Z.fail=Ee(j),Z.next=function(){var Fe=this,ze=1;return this.start(function(){return ze--?Fe.continue():Fe.stop()}).then(function(){return Fe})},Z.start=function(Fe){function ze(){if(I.result)try{Fe()}catch(Ue){Z.fail(Ue)}else Z.done=!0,Z.start=function(){throw new Error("Cursor behind last entry")},Z.stop()}var Zn=new Promise(function(Ue,Lt){Ue=Ee(Ue),I.onerror=ht(Lt),Z.fail=Lt,Z.stop=function(zr){Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=Je,Ue(zr)}});return I.onsuccess=Ee(function(Ue){I.onsuccess=ze,ze()}),Z.continue=ee,Z.continuePrimaryKey=ne,Z.advance=ue,ze(),Zn},K(Z)):K(null)},j)})},count:function(h){var y=h.query,b=h.trans,_=y.index,k=y.range;return new Promise(function(E,K){var j=b.objectStore(d),C=_.isPrimaryKey?j:j.index(_.name),j=r(k),C=j?C.count(j):C.count();C.onsuccess=Ee(function(D){return E(D.target.result)}),C.onerror=ht(K)})}}}var o,i,s,p=(i=c,s=wa((o=e).objectStoreNames),{schema:{name:o.name,tables:s.map(function(m){return i.objectStore(m)}).map(function(m){var f=m.keyPath,y=m.autoIncrement,d=A(f),h={},y={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:f==null,compound:d,keyPath:f,autoIncrement:y,unique:!0,extractKey:Er(f)},indexes:wa(m.indexNames).map(function(b){return m.index(b)}).map(function(E){var _=E.name,k=E.unique,K=E.multiEntry,E=E.keyPath,K={name:_,compound:A(E),keyPath:E,unique:k,multiEntry:K,extractKey:Er(E)};return h[yn(E)]=K}),getIndexByKeyPath:function(b){return h[yn(b)]}};return h[":id"]=y.primaryKey,f!=null&&(h[yn(f)]=y.primaryKey),y})},hasGetAll:0<s.length&&"getAll"in i.objectStore(s[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=p.schema,l=p.hasGetAll,p=c.tables.map(a),u={};return p.forEach(function(m){return u[m.name]=m}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(m){if(!u[m])throw new Error("Table '".concat(m,"' not found"));return u[m]},MIN_KEY:-1/0,MAX_KEY:pn(t),schema:c}}function yo(e,t,n,r){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=po(t,a,r),e.dbcore.reduce(function(o,i){return i=i.create,w(w({},o),i(o))},r))}}function Fn(e,r){var n=r.db,r=yo(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(a){var o=a.name;e.core.schema.tables.some(function(i){return i.name===o})&&(a.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=a.core))})}function zn(e,t,n,r){n.forEach(function(a){var o=r[a];t.forEach(function(i){var s=(function c(l,p){return ae(l,p)||(l=re(l))&&c(l,p)})(i,a);(!s||"value"in s&&s.value===void 0)&&(i===e.Transaction.prototype||i instanceof e.Transaction?W(i,a,{get:function(){return this.table(a)},set:function(c){xe(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):i[a]=new e.Table(a,o))})})}function Pr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function mo(e,t){return e._cfg.version-t._cfg.version}function go(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=kr("$meta",ka("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,a);o.create(n),o._completion.catch(r);var i=o._reject.bind(o),s=U.transless||U;Et(function(){return U.trans=o,U.transless=s,t!==0?(Fn(e,n),l=t,((c=o).storeNames.includes("$meta")?c.table("$meta").get("version").then(function(p){return p??l}):N.resolve(l)).then(function(p){return m=p,f=o,d=n,h=[],p=(u=e)._versions,y=u._dbSchema=Wn(0,u.idbdb,d),(p=p.filter(function(b){return b._cfg.version>=m})).length!==0?(p.forEach(function(b){h.push(function(){var _=y,k=b._cfg.dbschema;Vn(u,_,d),Vn(u,k,d),y=u._dbSchema=k;var E=Sr(_,k);E.add.forEach(function($){Or(d,$[0],$[1].primKey,$[1].indexes)}),E.change.forEach(function($){if($.recreate)throw new z.Upgrade("Not yet support for changing primary key");var I=d.objectStore($.name);$.add.forEach(function(B){return Ln(I,B)}),$.change.forEach(function(B){I.deleteIndex(B.name),Ln(I,B)}),$.del.forEach(function(B){return I.deleteIndex(B)})});var K=b._cfg.contentUpgrade;if(K&&b._cfg.version>m){Fn(u,d),f._memoizedTables={};var j=M(k);E.del.forEach(function($){j[$]=_[$]}),Pr(u,[u.Transaction.prototype]),zn(u,[u.Transaction.prototype],P(j),j),f.schema=j;var C,D=xt(K);return D&&Yt(),E=N.follow(function(){var $;(C=K(f))&&D&&($=Pt.bind(null,null),C.then($,$))}),C&&typeof C.then=="function"?N.resolve(C):E.then(function(){return C})}}),h.push(function(_){var k,E,K=b._cfg.dbschema;k=K,E=_,[].slice.call(E.db.objectStoreNames).forEach(function(j){return k[j]==null&&E.db.deleteObjectStore(j)}),Pr(u,[u.Transaction.prototype]),zn(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),f.schema=u._dbSchema}),h.push(function(_){u.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(u.idbdb.version/10)===b._cfg.version?(u.idbdb.deleteObjectStore("$meta"),delete u._dbSchema.$meta,u._storeNames=u._storeNames.filter(function(k){return k!=="$meta"})):_.objectStore("$meta").put(b._cfg.version,"version"))})}),(function b(){return h.length?N.resolve(h.shift()(f.idbtrans)).then(b):N.resolve()})().then(function(){xa(y,d)})):N.resolve();var u,m,f,d,h,y}).catch(i)):(P(a).forEach(function(p){Or(n,p,a[p].primKey,a[p].indexes)}),Fn(e,n),void N.follow(function(){return e.on.populate.fire(o)}).catch(i));var c,l})}function bo(e,t){xa(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Wn(0,e.idbdb,t);Vn(e,e._dbSchema,t);for(var r=0,a=Sr(n,e._dbSchema).change;r<a.length;r++){var o=(function(i){if(i.change.length||i.recreate)return console.warn("Unable to patch indexes of table ".concat(i.name," because it has changes on the type of index or primary key.")),{value:void 0};var s=t.objectStore(i.name);i.add.forEach(function(c){Xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(i.name,".").concat(c.src)),Ln(s,c)})})(a[r]);if(typeof o=="object")return o.value}}function Sr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],o=t[n];if(a){var i={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)i.recreate=!0,r.change.push(i);else{var s=a.idxByName,c=o.idxByName,l=void 0;for(l in s)c[l]||i.del.push(l);for(l in c){var p=s[l],u=c[l];p?p.src!==u.src&&i.change.push(u):i.add.push(u)}(0<i.del.length||0<i.add.length||0<i.change.length)&&r.change.push(i)}}else r.add.push([n,o])}return r}function Or(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Ln(a,o)}),a}function xa(e,t){P(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Xe&&console.debug("Dexie: Creating missing table",n),Or(t,n,e[n].primKey,e[n].indexes))})}function Ln(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Wn(e,t,n){var r={};return be(t.objectStoreNames,0).forEach(function(a){for(var o=n.objectStore(a),i=xr(_a(l=o.keyPath),l||"",!0,!1,!!o.autoIncrement,l&&typeof l!="string",!0),s=[],c=0;c<o.indexNames.length;++c){var p=o.index(o.indexNames[c]),l=p.keyPath,p=xr(p.name,l,!!p.unique,!!p.multiEntry,!1,l&&typeof l!="string",!1);s.push(p)}r[a]=kr(a,i,s)}),r}function Vn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var o=r[a],i=n.objectStore(o);e._hasGetAll="getAll"in i;for(var s=0;s<i.indexNames.length;++s){var c=i.indexNames[s],l=i.index(c).keyPath,p=typeof l=="string"?l:"["+be(l).join("+")+"]";!t[o]||(l=t[o].idxByName[p])&&(l.name=c,delete t[o].idxByName[p],t[o].idxByName[c]=l)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&O.WorkerGlobalScope&&O instanceof O.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ka(e){return e.split(",").map(function(t,n){var o=t.split(":"),r=(a=o[1])===null||a===void 0?void 0:a.trim(),a=(t=o[0].trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return xr(a,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),A(o),n===0,r)})}var _o=(Zt.prototype._createTableSchema=kr,Zt.prototype._parseIndexSyntax=ka,Zt.prototype._parseStoresSpec=function(e,t){var n=this;P(e).forEach(function(r){if(e[r]!==null){var a=n._parseIndexSyntax(e[r]),o=a.shift();if(!o)throw new z.Schema("Invalid schema for table "+r+": "+e[r]);if(o.unique=!0,o.multi)throw new z.Schema("Primary key cannot be multiEntry*");a.forEach(function(i){if(i.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!i.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")}),a=n._createTableSchema(r,o,a),t[r]=a}})},Zt.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?te(this._cfg.storesSource,n):n;var n=t._versions,r={},a={};return n.forEach(function(o){te(r,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(r,a)}),t._dbSchema=a,Pr(t,[t._allTables,t,t.Transaction.prototype]),zn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],P(a),a),t._storeNames=P(a),this},Zt.prototype.upgrade=function(e){return this._cfg.contentUpgrade=on(this._cfg.contentUpgrade||de,e),this},Zt);function Zt(){}function Ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new _t($n,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Cr(e){return e&&typeof e.databases=="function"}function Kr(e){return Et(function(){return U.letThrough=!0,e()})}function Tr(e){return!("from"in e)}var Re=function(e,t){if(!this){var n=new Re;return e&&"d"in e&&te(n,e),n}te(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function mn(e,t,n){var r=fe(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Tr(e))return te(e,{from:t,to:n,d:1});var a=e.l,r=e.r;if(fe(n,e.from)<0)return a?mn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Pa(e);if(0<fe(t,e.to))return r?mn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Pa(e);fe(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<fe(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&gn(e,a),r&&n&&gn(e,r)}}function gn(e,t){Tr(t)||(function n(r,c){var o=c.from,i=c.to,s=c.l,c=c.r;mn(r,o,i),s&&n(r,s),c&&n(r,c)})(e,t)}function Ea(e,t){var n=Un(t),r=n.next();if(r.done)return!1;for(var a=r.value,o=Un(e),i=o.next(a.from),s=i.value;!r.done&&!i.done;){if(fe(s.from,a.to)<=0&&0<=fe(s.to,a.from))return!0;fe(a.from,s.from)<0?a=(r=n.next(s.from)).value:s=(i=o.next(a.from)).value}return!1}function Un(e){var t=Tr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&fe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||fe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Pa(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=1<r?"r":r<-1?"l":"";a&&(t=a=="r"?"l":"r",n=w({},e),r=e[a],e.from=r.from,e.to=r.to,e[a]=r[a],n[a]=r[t],(e[t]=n).d=Sa(n)),e.d=Sa(e)}function Sa(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Hn(e,t){return P(t).forEach(function(n){e[n]?gn(e[n],t[n]):e[n]=(function r(a){var o,i,s={};for(o in a)ie(a,o)&&(i=a[o],s[o]=!i||typeof i!="object"||ce.has(i.constructor)?i:r(i));return s})(t[n])}),e}function Dr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ea(t[n],e[n])})}me(Re.prototype,((ot={add:function(e){return gn(this,e),this},addKey:function(e){return mn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return mn(t,n,n)}),this},hasKey:function(e){var t=Un(this).next(e).value;return t&&fe(t.from,e)<=0&&0<=fe(t.to,e)}})[Ie]=function(){return Un(this)},ot));var Ft={},Ir={},jr=!1;function Yn(e){Hn(Ir,e),jr||(jr=!0,setTimeout(function(){jr=!1,$r(Ir,!(Ir={}))},0))}function $r(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Ft);r<a.length;r++)Oa(i=a[r],e,n,t);else for(var o in e){var i,s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);s&&(o=s[1],s=s[2],(i=Ft["idb://".concat(o,"/").concat(s)])&&Oa(i,e,n,t))}n.forEach(function(c){return c()})}function Oa(e,t,n,r){for(var a=[],o=0,i=Object.entries(e.queries.query);o<i.length;o++){for(var s=i[o],c=s[0],l=[],p=0,u=s[1];p<u.length;p++){var m=u[p];Dr(t,m.obsSet)?m.subscribers.forEach(function(y){return n.add(y)}):r&&l.push(m)}r&&a.push([c,l])}if(r)for(var f=0,d=a;f<d.length;f++){var h=d[f],c=h[0],l=h[1];e.queries.query[c]=l}}function wo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ce(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),o=!1;function i(){if(t.openCanceller!==r)throw new z.DatabaseClosed("db.open() was cancelled")}function s(){return new N(function(m,f){if(i(),!n)throw new z.MissingAPI;var d=e.name,h=t.autoSchema||!a?n.open(d):n.open(d,a);if(!h)throw new z.MissingAPI;h.onerror=ht(f),h.onblocked=Ee(e._fireOnBlocked),h.onupgradeneeded=Ee(function(y){var b;p=h.transaction,t.autoSchema&&!e._options.allowEmptyDB?(h.onerror=hn,p.abort(),h.result.close(),(b=n.deleteDatabase(d)).onsuccess=b.onerror=Ee(function(){f(new z.NoSuchDatabase("Database ".concat(d," doesnt exist")))})):(p.onerror=ht(f),y=y.oldVersion>Math.pow(2,62)?0:y.oldVersion,u=y<1,e.idbdb=h.result,o&&bo(e,p),go(e,y/10,p,f))},f),h.onsuccess=Ee(function(){p=null;var y,b,_,k,E,K=e.idbdb=h.result,j=be(K.objectStoreNames);if(0<j.length)try{var C=K.transaction((k=j).length===1?k[0]:k,"readonly");if(t.autoSchema)b=K,_=C,(y=e).verno=b.version/10,_=y._dbSchema=Wn(0,b,_),y._storeNames=be(b.objectStoreNames,0),zn(y,[y._allTables],P(_),_);else if(Vn(e,e._dbSchema,C),((E=Sr(Wn(0,(E=e).idbdb,C),E._dbSchema)).add.length||E.change.some(function(D){return D.add.length||D.change.length}))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),a=K.version+1,o=!0,m(s());Fn(e,C)}catch{}Gt.push(e),K.onversionchange=Ee(function(D){t.vcFired=!0,e.on("versionchange").fire(D)}),K.onclose=Ee(function(){e.close({disableAutoOpen:!1})}),u&&(E=e._deps,C=d,K=E.indexedDB,E=E.IDBKeyRange,Cr(K)||C===$n||Ar(K,E).put({name:C}).catch(de)),m()},f)}).catch(function(m){switch(m?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),s();break;case"VersionError":if(0<a)return a=0,s()}return N.reject(m)})}var c,l=t.dbReadyResolve,p=null,u=!1;return N.race([r,(typeof navigator>"u"?N.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(m){function f(){return indexedDB.databases().finally(m)}c=setInterval(f,100),f()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(s)]).then(function(){return i(),t.onReadyBeingFired=[],N.resolve(Kr(function(){return e.on.ready.fire(e.vip)})).then(function m(){if(0<t.onReadyBeingFired.length){var f=t.onReadyBeingFired.reduce(on,de);return t.onReadyBeingFired=[],N.resolve(Kr(function(){return f(e.vip)})).then(m)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(m){t.dbOpenError=m;try{p&&p.abort()}catch{}return r===t.openCanceller&&e._close(),Ce(m)}).finally(function(){t.openComplete=!0,l()}).then(function(){var m;return u&&(m={},e.tables.forEach(function(f){f.schema.indexes.forEach(function(d){d.name&&(m["idb://".concat(e.name,"/").concat(f.name,"/").concat(d.name)]=new Re(-1/0,[[[]]]))}),m["idb://".concat(e.name,"/").concat(f.name,"/")]=m["idb://".concat(e.name,"/").concat(f.name,"/:dels")]=new Re(-1/0,[[[]]])}),At(vn).fire(m),$r(m,!0)),e})}function Nr(e){function t(o){return e.next(o)}var n=a(t),r=a(function(o){return e.throw(o)});function a(o){return function(c){var s=o(c),c=s.value;return s.done?c:c&&typeof c.then=="function"?c.then(n,r):A(c)?Promise.all(c).then(n,r):n(c)}}return a(t)()}function Gn(e,t,n){for(var r=A(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var xo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return w(w({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},o=[];function i(u,m,f){var d=yn(u),h=a[d]=a[d]||[],y=u==null?0:typeof u=="string"?1:u.length,b=0<m,b=w(w({},f),{name:b?"".concat(d,"(virtual-from:").concat(f.name,")"):f.name,lowLevelIndex:f,isVirtual:b,keyTail:m,keyLength:y,extractKey:Er(u),unique:!b&&f.unique});return h.push(b),b.isPrimaryKey||o.push(b),1<y&&i(y===2?u[0]:u.slice(0,y-1),m+1,f),h.sort(function(_,k){return _.keyTail-k.keyTail}),b}t=i(r.primaryKey.keyPath,0,r.primaryKey),a[":id"]=[t];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];i(l.keyPath,0,l)}function p(u){var m,f=u.query.index;return f.isVirtual?w(w({},u),{query:{index:f.lowLevelIndex,range:(m=u.query.range,f=f.keyTail,{type:m.type===1?2:m.type,lower:Gn(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,f),lowerOpen:!0,upper:Gn(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,f),upperOpen:!0})}}):u}return w(w({},n),{schema:w(w({},r),{primaryKey:t,indexes:o,getIndexByKeyPath:function(u){return(u=a[yn(u)])&&u[0]}}),count:function(u){return n.count(p(u))},query:function(u){return n.query(p(u))},openCursor:function(u){var m=u.query.index,f=m.keyTail,d=m.isVirtual,h=m.keyLength;return d?n.openCursor(p(u)).then(function(b){return b&&y(b)}):n.openCursor(u);function y(b){return Object.create(b,{continue:{value:function(_){_!=null?b.continue(Gn(_,u.reverse?e.MAX_KEY:e.MIN_KEY,f)):u.unique?b.continue(b.key.slice(0,h).concat(u.reverse?e.MIN_KEY:e.MAX_KEY,f)):b.continue()}},continuePrimaryKey:{value:function(_,k){b.continuePrimaryKey(Gn(_,e.MAX_KEY,f),k)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var _=b.key;return h===1?_[0]:_.slice(0,h)}},value:{get:function(){return b.value}}})}}})}})}};function Mr(e,t,n,r){return n=n||{},r=r||"",P(e).forEach(function(a){var o,i,s;ie(t,a)?(o=e[a],i=t[a],typeof o=="object"&&typeof i=="object"&&o&&i?(s=ke(o))!==ke(i)?n[r+a]=t[a]:s==="Object"?Mr(o,i,n,r+a+"."):o!==i&&(n[r+a]=t[a]):o!==i&&(n[r+a]=t[a])):n[r+a]=void 0}),P(t).forEach(function(a){ie(e,a)||(n[r+a]=t[a])}),n}function qr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ko={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return w(w({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return w(w({},n),{mutate:function(a){var o=U.trans,i=o.table(t).hook,s=i.deleting,c=i.creating,l=i.updating;switch(a.type){case"add":if(c.fire===de)break;return o._promise("readwrite",function(){return p(a)},!0);case"put":if(c.fire===de&&l.fire===de)break;return o._promise("readwrite",function(){return p(a)},!0);case"delete":if(s.fire===de)break;return o._promise("readwrite",function(){return p(a)},!0);case"deleteRange":if(s.fire===de)break;return o._promise("readwrite",function(){return(function u(m,f,d){return n.query({trans:m,values:!1,query:{index:r,range:f},limit:d}).then(function(h){var y=h.result;return p({type:"delete",keys:y,trans:m}).then(function(b){return 0<b.numFailures?Promise.reject(b.failures[0]):y.length<d?{failures:[],numFailures:0,lastResult:void 0}:u(m,w(w({},f),{lower:y[y.length-1],lowerOpen:!0}),d)})})})(a.trans,a.range,1e4)},!0)}return n.mutate(a);function p(u){var m,f,d,h=U.trans,y=u.keys||qr(r,u);if(!y)throw new Error("Keys missing");return(u=u.type==="add"||u.type==="put"?w(w({},u),{keys:y}):w({},u)).type!=="delete"&&(u.values=T([],u.values)),u.keys&&(u.keys=T([],u.keys)),m=n,d=y,((f=u).type==="add"?Promise.resolve([]):m.getMany({trans:f.trans,keys:d,cache:"immutable"})).then(function(b){var _=y.map(function(k,E){var K,j,C,D=b[E],$={onerror:null,onsuccess:null};return u.type==="delete"?s.fire.call($,k,D,h):u.type==="add"||D===void 0?(K=c.fire.call($,k,u.values[E],h),k==null&&K!=null&&(u.keys[E]=k=K,r.outbound||R(u.values[E],r.keyPath,k))):(K=Mr(D,u.values[E]),(j=l.fire.call($,K,k,D,h))&&(C=u.values[E],Object.keys(j).forEach(function(I){ie(C,I)?C[I]=j[I]:R(C,I,j[I])}))),$});return n.mutate(u).then(function(k){for(var E=k.failures,K=k.results,j=k.numFailures,k=k.lastResult,C=0;C<y.length;++C){var D=(K||y)[C],$=_[C];D==null?$.onerror&&$.onerror(E[C]):$.onsuccess&&$.onsuccess(u.type==="put"&&b[C]?u.values[C]:D)}return{failures:E,results:K,numFailures:j,lastResult:k}}).catch(function(k){return _.forEach(function(E){return E.onerror&&E.onerror(k)}),Promise.reject(k)})})}}})}})}};function Aa(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)fe(t.keys[a],e[o])===0&&(r.push(n?we(t.values[a]):t.values[a]),++o);return r.length===e.length?r:null}catch{return null}}var Eo={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return w(w({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=Aa(r.keys,r.trans._cache,r.cache==="clone");return a?N.resolve(a):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?we(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ca(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ka(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Po={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Re(e.MIN_KEY,e.MAX_KEY);return w(w({},e),{transaction:function(r,a,o){if(U.subscr&&a!=="readonly")throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(U.querier));return e.transaction(r,a,o)},table:function(r){var a=e.table(r),o=a.schema,i=o.primaryKey,u=o.indexes,s=i.extractKey,c=i.outbound,l=i.autoIncrement&&u.filter(function(f){return f.compound&&f.keyPath.includes(i.keyPath)}),p=w(w({},a),{mutate:function(f){function d(I){return I="idb://".concat(t,"/").concat(r,"/").concat(I),k[I]||(k[I]=new Re)}var h,y,b,_=f.trans,k=f.mutatedParts||(f.mutatedParts={}),E=d(""),K=d(":dels"),j=f.type,$=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[qr(i,f).filter(function(I){return I}),f.values]:[],C=$[0],D=$[1],$=f.trans._cache;return A(C)?(E.addKeys(C),($=j==="delete"||C.length===D.length?Aa(C,$):null)||K.addKeys(C),($||D)&&(h=d,y=$,b=D,o.indexes.forEach(function(I){var B=h(I.name||"");function ee(ue){return ue!=null?I.extractKey(ue):null}function ne(ue){return I.multiEntry&&A(ue)?ue.forEach(function(Je){return B.addKey(Je)}):B.addKey(ue)}(y||b).forEach(function(ue,Fe){var Z=y&&ee(y[Fe]),Fe=b&&ee(b[Fe]);fe(Z,Fe)!==0&&(Z!=null&&ne(Z),Fe!=null&&ne(Fe))})}))):C?(D={from:(D=C.lower)!==null&&D!==void 0?D:e.MIN_KEY,to:(D=C.upper)!==null&&D!==void 0?D:e.MAX_KEY},K.add(D),E.add(D)):(E.add(n),K.add(n),o.indexes.forEach(function(I){return d(I.name).add(n)})),a.mutate(f).then(function(I){return!C||f.type!=="add"&&f.type!=="put"||(E.addKeys(I.results),l&&l.forEach(function(B){for(var ee=f.values.map(function(Z){return B.extractKey(Z)}),ne=B.keyPath.findIndex(function(Z){return Z===i.keyPath}),ue=0,Je=I.results.length;ue<Je;++ue)ee[ue][ne]=I.results[ue];d(B.name).addKeys(ee)})),_.mutatedParts=Hn(_.mutatedParts||{},k),I})}}),u=function(d){var h=d.query,d=h.index,h=h.range;return[d,new Re((d=h.lower)!==null&&d!==void 0?d:e.MIN_KEY,(h=h.upper)!==null&&h!==void 0?h:e.MAX_KEY)]},m={get:function(f){return[i,new Re(f.key)]},getMany:function(f){return[i,new Re().addKeys(f.keys)]},count:u,query:u,openCursor:u};return P(m).forEach(function(f){p[f]=function(d){var h=U.subscr,y=!!h,b=Ca(U,a)&&Ka(f,d)?d.obsSet={}:h;if(y){var _=function(D){return D="idb://".concat(t,"/").concat(r,"/").concat(D),b[D]||(b[D]=new Re)},k=_(""),E=_(":dels"),h=m[f](d),y=h[0],h=h[1];if((f==="query"&&y.isPrimaryKey&&!d.values?E:_(y.name||"")).add(h),!y.isPrimaryKey){if(f!=="count"){var K=f==="query"&&c&&d.values&&a.query(w(w({},d),{values:!1}));return a[f].apply(this,arguments).then(function(D){if(f==="query"){if(c&&d.values)return K.then(function(ee){return ee=ee.result,k.addKeys(ee),D});var $=d.values?D.result.map(s):D.result;(d.values?k:E).addKeys($)}else if(f==="openCursor"){var I=D,B=d.values;return I&&Object.create(I,{key:{get:function(){return E.addKey(I.primaryKey),I.key}},primaryKey:{get:function(){var ee=I.primaryKey;return E.addKey(ee),ee}},value:{get:function(){return B&&k.addKey(I.primaryKey),I.value}}})}return D})}E.add(n)}}return a[f].apply(this,arguments)}}),p}})}};function Ta(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=w({},t),A(t.keys)&&(t.keys=t.keys.filter(function(a,o){return!(o in n.failures)})),"values"in t&&A(t.values)&&(t.values=t.values.filter(function(a,o){return!(o in n.failures)})),t)}function Br(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<fe(n,r.lower):0<=fe(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?fe(e,t.upper)<0:fe(e,t.upper)<=0));var n,r}function Da(e,t,m,r,a,o){if(!m||m.length===0)return e;var i=t.query.index,s=i.multiEntry,c=t.query.range,l=r.schema.primaryKey.extractKey,p=i.extractKey,u=(i.lowLevelIndex||i).extractKey,m=m.reduce(function(f,d){var h=f,y=[];if(d.type==="add"||d.type==="put")for(var b=new Re,_=d.values.length-1;0<=_;--_){var k,E=d.values[_],K=l(E);b.hasKey(K)||(k=p(E),(s&&A(k)?k.some(function(I){return Br(I,c)}):Br(k,c))&&(b.addKey(K),y.push(E)))}switch(d.type){case"add":var j=new Re().addKeys(t.values?f.map(function(B){return l(B)}):f),h=f.concat(t.values?y.filter(function(B){return B=l(B),!j.hasKey(B)&&(j.addKey(B),!0)}):y.map(function(B){return l(B)}).filter(function(B){return!j.hasKey(B)&&(j.addKey(B),!0)}));break;case"put":var C=new Re().addKeys(d.values.map(function(B){return l(B)}));h=f.filter(function(B){return!C.hasKey(t.values?l(B):B)}).concat(t.values?y:y.map(function(B){return l(B)}));break;case"delete":var D=new Re().addKeys(d.keys);h=f.filter(function(B){return!D.hasKey(t.values?l(B):B)});break;case"deleteRange":var $=d.range;h=f.filter(function(B){return!Br(l(B),$)})}return h},e);return m===e?e:(m.sort(function(f,d){return fe(u(f),u(d))||fe(l(f),l(d))}),t.limit&&t.limit<1/0&&(m.length>t.limit?m.length=t.limit:e.length===t.limit&&m.length<t.limit&&(a.dirty=!0)),o?Object.freeze(m):m)}function Ia(e,t){return fe(e.lower,t.lower)===0&&fe(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function So(e,t){return(function(n,r,a,o){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=fe(n,r))===0){if(a&&o)return 0;if(a)return 1;if(o)return-1}return r})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=(function(n,r,a,o){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=fe(n,r))===0){if(a&&o)return 0;if(a)return-1;if(o)return 1}return r})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Oo(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var a,o;e.subscribers.delete(n),e.subscribers.size===0&&(a=e,o=t,setTimeout(function(){a.subscribers.size===0&&Be(o,a)},3e3))})}var Ao={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return w(w({},e),{transaction:function(n,r,a){var o,i,s=e.transaction(n,r,a);return r==="readwrite"&&(i=(o=new AbortController).signal,a=function(c){return function(){if(o.abort(),r==="readwrite"){for(var l=new Set,p=0,u=n;p<u.length;p++){var m=u[p],f=Ft["idb://".concat(t,"/").concat(m)];if(f){var d=e.table(m),h=f.optimisticOps.filter(function(B){return B.trans===s});if(s._explicit&&c&&s.mutatedParts)for(var y=0,b=Object.values(f.queries.query);y<b.length;y++)for(var _=0,k=(j=b[y]).slice();_<k.length;_++)Dr((C=k[_]).obsSet,s.mutatedParts)&&(Be(j,C),C.subscribers.forEach(function(B){return l.add(B)}));else if(0<h.length){f.optimisticOps=f.optimisticOps.filter(function(B){return B.trans!==s});for(var E=0,K=Object.values(f.queries.query);E<K.length;E++)for(var j,C,D,$=0,I=(j=K[E]).slice();$<I.length;$++)(C=I[$]).res!=null&&s.mutatedParts&&(c&&!C.dirty?(D=Object.isFrozen(C.res),D=Da(C.res,C.req,h,d,C,D),C.dirty?(Be(j,C),C.subscribers.forEach(function(B){return l.add(B)})):D!==C.res&&(C.res=D,C.promise=N.resolve({result:D}))):(C.dirty&&Be(j,C),C.subscribers.forEach(function(B){return l.add(B)})))}}}l.forEach(function(B){return B()})}}},s.addEventListener("abort",a(!1),{signal:i}),s.addEventListener("error",a(!1),{signal:i}),s.addEventListener("complete",a(!0),{signal:i})),s},table:function(n){var r=e.table(n),a=r.schema.primaryKey;return w(w({},r),{mutate:function(o){var i=U.trans;if(a.outbound||i.db._options.cache==="disabled"||i.explicit||i.idbtrans.mode!=="readwrite")return r.mutate(o);var s=Ft["idb://".concat(t,"/").concat(n)];return s?(i=r.mutate(o),o.type!=="add"&&o.type!=="put"||!(50<=o.values.length||qr(a,o).some(function(c){return c==null}))?(s.optimisticOps.push(o),o.mutatedParts&&Yn(o.mutatedParts),i.then(function(c){0<c.numFailures&&(Be(s.optimisticOps,o),(c=Ta(0,o,c))&&s.optimisticOps.push(c),o.mutatedParts&&Yn(o.mutatedParts))}),i.catch(function(){Be(s.optimisticOps,o),o.mutatedParts&&Yn(o.mutatedParts)})):i.then(function(c){var l=Ta(0,w(w({},o),{values:o.values.map(function(p,u){var m;return c.failures[u]?p:(p=(m=a.keyPath)!==null&&m!==void 0&&m.includes(".")?we(p):w({},p),R(p,a.keyPath,c.results[u]),p)})}),c);s.optimisticOps.push(l),queueMicrotask(function(){return o.mutatedParts&&Yn(o.mutatedParts)})}),i):r.mutate(o)},query:function(o){if(!Ca(U,r)||!Ka("query",o))return r.query(o);var i=((l=U.trans)===null||l===void 0?void 0:l.db._options.cache)==="immutable",u=U,s=u.requery,c=u.signal,l=(function(d,h,y,b){var _=Ft["idb://".concat(d,"/").concat(h)];if(!_)return[];if(!(h=_.queries[y]))return[null,!1,_,null];var k=h[(b.query?b.query.index.name:null)||""];if(!k)return[null,!1,_,null];switch(y){case"query":var E=k.find(function(K){return K.req.limit===b.limit&&K.req.values===b.values&&Ia(K.req.query.range,b.query.range)});return E?[E,!0,_,k]:[k.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=b.limit&&(!b.values||K.req.values)&&So(K.req.query.range,b.query.range)}),!1,_,k];case"count":return E=k.find(function(K){return Ia(K.req.query.range,b.query.range)}),[E,!!E,_,k]}})(t,n,"query",o),p=l[0],u=l[1],m=l[2],f=l[3];return p&&u?p.obsSet=o.obsSet:(u=r.query(o).then(function(d){var h=d.result;if(p&&(p.res=h),i){for(var y=0,b=h.length;y<b;++y)Object.freeze(h[y]);Object.freeze(h)}else d.result=we(h);return d}).catch(function(d){return f&&p&&Be(f,p),Promise.reject(d)}),p={obsSet:o.obsSet,promise:u,subscribers:new Set,type:"query",req:o,dirty:!1},f?f.push(p):(f=[p],(m=m||(Ft["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[o.query.index.name||""]=f)),Oo(p,f,s,c),p.promise.then(function(d){return{result:Da(d.result,o,m?.optimisticOps,r,p,i)}})}})}})}};function Qn(e,t){return new Proxy(e,{get:function(n,r,a){return r==="db"?t:Reflect.get(n,r,a)}})}var _t=(Ke.prototype.version=function(e){if(isNaN(e)||e<.1)throw new z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(mo),n.stores({}),this._state.autoSchema=!1,n)},Ke.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?e():new N(function(n,r){if(t._state.openComplete)return r(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new z.DatabaseClosed);t.open().catch(de)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ke.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:a}),e.sort(function(o,i){return o.level-i.level}),this},Ke.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return r?a.create!==r:!!n&&a.name!==n})),this},Ke.prototype.open=function(){var e=this;return qt(kt,function(){return wo(e)})},Ke.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=Gt.indexOf(this);if(0<=t&&Gt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new N(function(n){e.dbReadyResolve=n}),e.openCanceller=new N(function(n,r){e.cancelOpen=r}))},Ke.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ke.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new N(function(a,o){function i(){t.close(e);var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=Ee(function(){var c,l,p;c=t._deps,l=t.name,p=c.indexedDB,c=c.IDBKeyRange,Cr(p)||l===$n||Ar(p,c).delete(l).catch(de),a()}),s.onerror=ht(o),s.onblocked=t._fireOnBlocked}if(n)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},Ke.prototype.backendDB=function(){return this.idbdb},Ke.prototype.isOpen=function(){return this.idbdb!==null},Ke.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ke.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ke.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ke.prototype,"tables",{get:function(){var e=this;return P(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ke.prototype.transaction=function(){var e=(function(t,n,r){var a=arguments.length;if(a<2)throw new z.InvalidArgument("Too few arguments");for(var o=new Array(a-1);--a;)o[a-1]=arguments[a];return r=o.pop(),[t,ye(o),r]}).apply(this,arguments);return this._transaction.apply(this,e)},Ke.prototype._transaction=function(e,t,n){var r=this,a=U.trans;a&&a.db===this&&e.indexOf("!")===-1||(a=null);var o,i,s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(i=t.map(function(l){if(l=l instanceof r.Table?l.name:l,typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),e=="r"||e===mr)o=mr;else{if(e!="rw"&&e!=gr)throw new z.InvalidArgument("Invalid transaction mode: "+e);o=gr}if(a){if(a.mode===mr&&o===gr){if(!s)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&i.forEach(function(l){if(a&&a.storeNames.indexOf(l)===-1){if(!s)throw new z.SubTransaction("Table "+l+" not included in parent transaction.");a=null}}),s&&a&&!a.active&&(a=null)}}catch(l){return a?a._promise(null,function(p,u){u(l)}):Ce(l)}var c=(function l(p,u,m,f,d){return N.resolve().then(function(){var h=U.transless||U,y=p._createTransaction(u,m,p._dbSchema,f);if(y.explicit=!0,h={trans:y,transless:h},f)y.idbtrans=f.idbtrans;else try{y.create(),y.idbtrans._explicit=!0,p._state.PR1398_maxLoop=3}catch(k){return k.name===he.InvalidState&&p.isOpen()&&0<--p._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),p.close({disableAutoOpen:!1}),p.open().then(function(){return l(p,u,m,null,d)})):Ce(k)}var b,_=xt(d);return _&&Yt(),h=N.follow(function(){var k;(b=d.call(y,y))&&(_?(k=Pt.bind(null,null),b.then(k,k)):typeof b.next=="function"&&typeof b.throw=="function"&&(b=Nr(b)))},h),(b&&typeof b.then=="function"?N.resolve(b).then(function(k){return y.active?k:Ce(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return b})).then(function(k){return f&&y._resolve(),y._completion.then(function(){return k})}).catch(function(k){return y._reject(k),Ce(k)})})}).bind(null,this,o,i,a,n);return a?a._promise(o,c,"lock"):U.trans?qt(U.transless,function(){return r._whenReady(c)}):this._whenReady(c)},Ke.prototype.table=function(e){if(!ie(this._allTables,e))throw new z.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ke);function Ke(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ke.dependencies;this._options=t=w({addons:Ke.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,o,i,s,c,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:de,dbReadyPromise:null,cancelOpen:de,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};l.dbReadyPromise=new N(function(u){l.dbReadyResolve=u}),l.openCanceller=new N(function(u,m){l.cancelOpen=m}),this._state=l,this.name=e,this.on=fn(this,"populate","blocked","versionchange","close",{ready:[on,de]}),this.once=function(u,m){var f=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];n.on(u).unsubscribe(f),m.apply(n,d)};return n.on(u,f)},this.on.ready.subscribe=H(this.on.ready.subscribe,function(u){return function(m,f){Ke.vip(function(){var d,h=n._state;h.openComplete?(h.dbOpenError||N.resolve().then(m),f&&u(m)):h.onReadyBeingFired?(h.onReadyBeingFired.push(m),f&&u(m)):(u(m),d=n,f||u(function y(){d.on.ready.unsubscribe(m),d.on.ready.unsubscribe(y)}))})}}),this.Collection=(a=this,dn(co.prototype,function(b,y){this.db=a;var f=ua,d=null;if(y)try{f=y()}catch(_){d=_}var h=b._ctx,y=h.table,b=y.hook.reading.fire;this._ctx={table:y,index:h.index,isPrimKey:!h.index||y.schema.primKey.keyPath&&h.index===y.schema.primKey.name,range:f,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:h.or,valueMapper:b!==dt?b:null}})),this.Table=(o=this,dn(va.prototype,function(u,m,f){this.db=o,this._tx=f,this.name=u,this.schema=m,this.hook=o._allTables[u]?o._allTables[u].hook:fn(null,{creating:[Pn,de],reading:[Tt,dt],updating:[ur,de],deleting:[Sn,de]})})),this.Transaction=(i=this,dn(ho.prototype,function(u,m,f,d,h){var y=this;u!=="readonly"&&m.forEach(function(b){b=(b=f[b])===null||b===void 0?void 0:b.yProps,b&&(m=m.concat(b.map(function(_){return _.updatesTable})))}),this.db=i,this.mode=u,this.storeNames=m,this.schema=f,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=fn(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new N(function(b,_){y._resolve=b,y._reject=_}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(b){var _=y.active;return y.active=!1,y.on.error.fire(b),y.parent?y.parent._reject(b):_&&y.idbtrans&&y.idbtrans.abort(),Ce(b)})})),this.Version=(s=this,dn(_o.prototype,function(u){this.db=s,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,dn(ba.prototype,function(u,m,f){if(this.db=c,this._ctx={table:u,index:m===":id"?null:m,or:f},this._cmp=this._ascending=fe,this._descending=function(d,h){return fe(h,d)},this._max=function(d,h){return 0<fe(d,h)?d:h},this._min=function(d,h){return fe(d,h)<0?d:h},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI})),this.on("versionchange",function(u){0<u.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(u.oldVersion/10))}),this._maxKey=pn(t.IDBKeyRange),this._createTransaction=function(u,m,f,d){return new n.Transaction(u,m,f,n._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(u){n.on("blocked").fire(u),Gt.filter(function(m){return m.name===n.name&&m!==n&&!m._state.vcFired}).map(function(m){return m.on("versionchange").fire(u)})},this.use(Eo),this.use(Ao),this.use(Po),this.use(xo),this.use(ko);var p=new Proxy(this,{get:function(u,m,f){if(m==="_vip")return!0;if(m==="table")return function(h){return Qn(n.table(h),p)};var d=Reflect.get(u,m,f);return d instanceof va?Qn(d,p):m==="tables"?d.map(function(h){return Qn(h,p)}):m==="_createTransaction"?function(){return Qn(d.apply(this,arguments),p)}:d}});this.vip=p,r.forEach(function(u){return u(n)})}var Xn,ot=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Co=(Rr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Rr.prototype[ot]=function(){return this},Rr);function Rr(e){this._subscribe=e}try{Xn={indexedDB:O.indexedDB||O.mozIndexedDB||O.webkitIndexedDB||O.msIndexedDB,IDBKeyRange:O.IDBKeyRange||O.webkitIDBKeyRange}}catch{Xn={indexedDB:null,IDBKeyRange:null}}function ja(e){var t,n=!1,r=new Co(function(a){var o=xt(e),i,s=!1,c={},l={},p={get closed(){return s},unsubscribe:function(){s||(s=!0,i&&i.abort(),u&&At.storagemutated.unsubscribe(f))}};a.start&&a.start(p);var u=!1,m=function(){return yr(d)},f=function(h){Hn(c,h),Dr(l,c)&&m()},d=function(){var h,y,b;!s&&Xn.indexedDB&&(c={},h={},i&&i.abort(),i=new AbortController,b=(function(_){var k=Ut();try{o&&Yt();var E=Et(e,_);return E=o?E.finally(Pt):E}finally{k&&Ht()}})(y={subscr:h,signal:i.signal,requery:m,querier:e,trans:null}),Promise.resolve(b).then(function(_){n=!0,t=_,s||y.signal.aborted||(c={},(function(k){for(var E in k)if(ie(k,E))return;return 1})(l=h)||u||(At(vn,f),u=!0),yr(function(){return!s&&a.next&&a.next(_)}))},function(_){n=!1,["DatabaseClosedError","AbortError"].includes(_?.name)||s||yr(function(){s||a.error&&a.error(_)})}))};return setTimeout(m,0),p});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var zt=_t;function Fr(e){var t=Ct;try{Ct=!0,At.storagemutated.fire(e),$r(e,!0)}finally{Ct=t}}me(zt,w(w({},at),{delete:function(e){return new zt(e,{addons:[]}).delete()},exists:function(e){return new zt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=zt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Cr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==$n})}):Ar(n,t).toCollection().primaryKeys()).then(e)}catch{return Ce(new z.MissingAPI)}var t,n},defineClass:function(){return function(e){te(this,e)}},ignoreTransaction:function(e){return U.trans?qt(U.transless,e):e()},vip:Kr,async:function(e){return function(){try{var t=Nr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:N.resolve(t)}catch(n){return Ce(n)}}},spawn:function(e,t,n){try{var r=Nr(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:N.resolve(r)}catch(a){return Ce(a)}},currentTransaction:{get:function(){return U.trans||null}},waitFor:function(e,t){return t=N.resolve(typeof e=="function"?zt.ignoreTransaction(e):e).timeout(t||6e4),U.trans?U.trans.waitFor(t):t},Promise:N,debug:{get:function(){return Xe},set:function(e){Dt(e)}},derive:X,extend:te,props:me,override:H,Events:fn,on:At,liveQuery:ja,extendObservabilitySet:Hn,getByKeyPath:q,setByKeyPath:R,delByKeyPath:function(e,t){typeof t=="string"?R(e,t,void 0):"length"in t&&[].map.call(t,function(n){R(e,n,void 0)})},shallowClone:M,deepClone:we,getObjectDiff:Mr,cmp:fe,asap:G,minKey:-1/0,addons:[],connections:Gt,errnames:he,dependencies:Xn,cache:Ft,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),zt.maxKey=pn(zt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(At(vn,function(e){Ct||(e=new CustomEvent(wr,{detail:e}),Ct=!0,dispatchEvent(e),Ct=!1)}),addEventListener(wr,function(e){e=e.detail,Ct||Fr(e)}));var Jt,Ct=!1,$a=function(){};return typeof BroadcastChannel<"u"&&(($a=function(){(Jt=new BroadcastChannel(wr)).onmessage=function(e){return e.data&&Fr(e.data)}})(),typeof Jt.unref=="function"&&Jt.unref(),At(vn,function(e){Ct||Jt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!_t.disableBfCache&&e.persisted){Xe&&console.debug("Dexie: handling persisted pagehide"),Jt?.close();for(var t=0,n=Gt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!_t.disableBfCache&&e.persisted&&(Xe&&console.debug("Dexie: handling persisted pageshow"),$a(),Fr({all:new Re(-1/0,[[]])}))})),N.rejectionMapper=function(e,t){return!e||e instanceof Se||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Oe[e.name]?e:(t=new Oe[e.name](t||e.message,e),"stack"in e&&W(t,"stack",{get:function(){return this.inner.stack}}),t)},Dt(Xe),w(_t,Object.freeze({__proto__:null,Dexie:_t,liveQuery:ja,Entity:ca,cmp:fe,PropModification:ln,replacePrefix:function(e,t){return new ln({replacePrefix:[e,t]})},add:function(e){return new ln({add:e})},remove:function(e){return new ln({remove:e})},default:_t,RangeSet:Re,mergeRanges:gn,rangesOverlap:Ea}),{default:_t}),_t})})(Jn)),Jn.exports}var mi=yi();const ea=vi(mi),La=Symbol.for("Dexie"),ar=globalThis[La]||(globalThis[La]=ea);if(ea.semVer!==ar.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ea.semVer} and ${ar.semVer}`);const{liveQuery:_s,mergeRanges:ws,rangesOverlap:xs,RangeSet:ks,cmp:Es,Entity:Ps,PropModification:Ss,replacePrefix:Os,add:As,remove:Cs,DexieYProvider:Ks}=ar;class gi extends ar{efforts;entries;categories;constructor(){super("PiggyBankDB"),this.version(2).stores({efforts:"++id, name, targetAmount, createdAt, updatedAt",entries:"++id, effortId, amount, category, description, createdAt",categories:"id, color, icon"})}}const st=new gi;class bi{async createEffort(v){const x=new Date,w={...v,createdAt:x,updatedAt:x};return await st.efforts.add(w)}async getEfforts(){return await st.efforts.toArray()}async updateEffort(v,x){await st.efforts.update(v,{...x,updatedAt:new Date})}async deleteEffort(v){await st.efforts.delete(v),await st.entries.where("effortId").equals(v).delete()}async createEntry(v){const x={...v,createdAt:new Date};return await st.entries.add(x)}async getEntries(v){return v!==void 0?await st.entries.where("effortId").equals(v).toArray():await st.entries.toArray()}async updateEntry(v,x){await st.entries.update(v,x)}async deleteEntry(v){await st.entries.delete(v)}async initialize(){try{await st.open()}catch(v){throw console.error("Failed to initialize database:",v),v}}}const wt=new bi;function _i(g){for(var v=g.length/6|0,x=new Array(v),w=0;w<v;)x[w]="#"+g.slice(w*6,++w*6);return x}const pt=_i("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");let ut=tt(sr([])),et=tt(sr([])),tn=tt(null);const wi=[{id:"food",color:pt[0],icon:"utensils"},{id:"travel",color:pt[1],icon:"plane"},{id:"salary",color:pt[2],icon:"dollar-sign"},{id:"games",color:pt[3],icon:"gamepad-2"},{id:"fuel",color:pt[4],icon:"fuel"},{id:"sells",color:pt[5],icon:"shopping-cart"},{id:"taxes",color:pt[6],icon:"file-text"},{id:"charity",color:pt[7],icon:"heart"},{id:"finance",color:pt[8],icon:"trending-up"},{id:"other",color:pt[9],icon:"tag"}];function Wa(){return S(tn)?S(et).filter(g=>g.effortId===S(tn).id):[]}const Ae={get efforts(){return S(ut)},get sortedEfforts(){return S(ut).toSorted((g,v)=>v.updatedAt.getTime()-g.updatedAt.getTime())},get currentEffort(){return S(tn)},async loadEfforts(){try{pe(ut,await wt.getEfforts(),!0)}catch(g){throw console.error("Failed to load efforts:",g),g}},async createEffort(g){try{const v=await wt.createEffort(g),x={...g,id:v};S(ut).push(x),pe(ut,[...S(ut)],!0)}catch(v){throw console.error("Failed to create effort:",v),v}},async updateEffort(g,v){await wt.updateEffort(g,v);const x=S(ut).findIndex(w=>w.id===g);x!==-1&&(S(ut)[x]={...S(ut)[x],...v,updatedAt:new Date})},async deleteEffort(g){await wt.deleteEffort(g),pe(ut,S(ut).filter(v=>v.id!==g),!0),pe(et,S(et).filter(v=>v.effortId!==g),!0),S(tn)?.id===g&&pe(tn,null)},setCurrentEffort(g){pe(tn,g,!0)}},rn={get entries(){return S(et)},get filteredEntries(){return Wa()},get sortedFilteredEntries(){return Wa().toSorted((g,v)=>v.createdAt.getTime()-g.createdAt.getTime())},async loadEntries(g){try{pe(et,await wt.getEntries(g),!0)}catch(v){throw console.error("Failed to load entries:",v),v}},async createEntry(g){try{const v=await wt.createEntry(g),x={...g,id:v};S(et).push(x),pe(et,[...S(et)],!0),await Ae.updateEffort(g.effortId,{})}catch(v){throw console.error("Failed to create entry:",v),v}},async updateEntry(g,v){await wt.updateEntry(g,v);const x=S(et).findIndex(w=>w.id===g);x!==-1&&(S(et)[x]={...S(et)[x],...v})},async deleteEntry(g){await wt.deleteEntry(g),pe(et,S(et).filter(v=>v.id!==g),!0)}},er={get categories(){return wi}};async function xi(){try{console.log("Migration: Removed categoryColor and icon fields from SavingsEntry model")}catch(g){console.error("Failed to run migration:",g)}}function ki(){typeof window<"u"&&"serviceWorker"in navigator?(console.log("Service Worker Debug: Checking registration..."),navigator.serviceWorker.getRegistrations().then(g=>{console.log("Service Worker Debug: Found registrations:",g.length),g.forEach(v=>{console.log("Service Worker Debug: Registration:",{scope:v.scope,active:!!v.active,installing:!!v.installing,waiting:!!v.waiting,state:v.active?.state})})}).catch(g=>console.error("Service Worker Debug: Error getting registrations:",g)),navigator.serviceWorker.ready.then(g=>{console.log("Service Worker Debug: Ready registration:",{scope:g.scope,active:!!g.active,state:g.active?.state}),"caches"in window&&caches.keys().then(v=>{console.log("Service Worker Debug: Cache names:",v),v.forEach(x=>{caches.open(x).then(w=>{w.keys().then(T=>{console.log(`Service Worker Debug: Cache "${x}" has ${T.length} entries`),T.slice(0,5).forEach(O=>{console.log(`  - ${O.url}`)}),T.length>5&&console.log(`  ... and ${T.length-5} more`)})})})}).catch(v=>console.error("Service Worker Debug: Error checking caches:",v))}).catch(g=>console.error("Service Worker Debug: Error waiting for ready:",g))):console.log("Service Worker Debug: Service Worker not supported or not in browser")}async function Ei(){try{await wt.initialize(),await xi(),await Ae.loadEfforts(),await rn.loadEntries(),ki()}catch(g){throw console.error("Failed to initialize stores:",g),g}}const ta={symbol:"€",code:"EUR",locale:"en-EU"};function _n(g){return new Intl.NumberFormat(ta.locale,{style:"currency",currency:ta.code}).format(g)}var Pi=Pe('<div class="flex justify-center items-center mb-2"><span class="text-sm"> <!></span></div>'),Si=Pe('<div class="h-full"></div>'),Oi=Pe('<div class="h-full"></div>'),Ai=Pe('<div class="h-full" style="flex: 100; background-color: transparent;"></div>'),Ci=Pe('<div class="flex items-center gap-1 text-xs"><div class="w-2 h-2 rounded-full"></div> <span class="capitalize"> </span> <span class="text-base-content/70"> </span></div>'),Ki=Pe('<div class="flex flex-wrap gap-2 mt-2"></div>'),Ti=Pe('<!> <div class="w-full bg-base-200 rounded-full h-3 overflow-hidden flex"><!> <!></div> <div class="text-xs text-base-content/70 mt-1"><!></div> <!>',1);function ro(g,v){kn(v,!0);let x=Wt(v,"showTotal",3,!1);const w=()=>rn.entries.filter(H=>H.effortId===v.effortId).reduce((H,V)=>H+V.amount,0),T=()=>{const H=Ae.efforts.find(G=>G.id===v.effortId);if(!H?.targetAmount)return 100;const V=w();return Math.min(V/H.targetAmount*100,100)},O=()=>{const H=rn.entries.filter(M=>M.effortId===v.effortId),V={};H.forEach(M=>{if(!V[M.category]){const J=er.categories.find(ye=>ye.id===M.category);V[M.category]={amount:0,color:J?.color||"#666"}}V[M.category].amount+=M.amount});const G=w();Ae.efforts.find(M=>M.id===v.effortId)?.targetAmount;const R=T();return Object.entries(V).map(([M,J])=>({category:M,amount:J.amount,color:J.color,percentage:R>0?J.amount/G*R:0})).filter(M=>M.percentage>0)};var P=Ti(),A=Ge(P);{var te=H=>{var V=Pi(),G=L(V),q=L(G),R=Y(q);{var M=J=>{var ye=Ba();Me(ce=>De(ye,`/ ${ce??""}`),[()=>_n(Ae.efforts.find(ce=>ce.id===v.effortId)?.targetAmount??0)]),oe(J,ye)};Le(R,J=>{Ae.efforts.find(ye=>ye.id===v.effortId)?.targetAmount&&J(M)})}F(G),F(V),Me(J=>De(q,`${J??""} `),[()=>_n(w())]),oe(H,V)};Le(A,H=>{x()&&H(te)})}var re=Y(A,2),le=L(re);an(le,17,O,Zr,(H,V)=>{var G=Si();Me((q,R)=>{xn(G,`flex: ${S(V).percentage??""}; background-color: ${S(V).color??""};`),Qr(G,"title",`${S(V).category??""}: ${q??""} (${R??""}%)`)},[()=>_n(S(V).amount),()=>Math.round(S(V).percentage)]),oe(H,G)});var ie=Y(le,2);{var me=H=>{var V=Oi();Me(G=>xn(V,`flex: ${G??""}; background-color: transparent;`),[()=>100-T()]),oe(H,V)},xe=H=>{var V=nt(),G=Ge(V);{var q=R=>{var M=Ai();oe(R,M)};Le(G,R=>{w()===0&&!Ae.efforts.find(M=>M.id===v.effortId)?.targetAmount&&R(q)},!0)}oe(H,V)};Le(ie,H=>{w()<(Ae.efforts.find(V=>V.id===v.effortId)?.targetAmount||0)?H(me):H(xe,!1)})}F(re);var W=Y(re,2),X=L(W);{var ae=H=>{var V=Ba();Me(G=>De(V,`${G??""}% complete`),[()=>Math.round(T())]),oe(H,V)};Le(X,H=>{Ae.efforts.find(V=>V.id===v.effortId)?.targetAmount&&H(ae)})}F(W);var ge=Y(W,2);{var be=H=>{var V=Ki();an(V,21,O,Zr,(G,q)=>{var R=Ci(),M=L(R),J=Y(M,2),ye=L(J,!0);F(J);var ce=Y(J,2),se=L(ce,!0);F(ce),F(R),Me(we=>{xn(M,`background-color: ${S(q).color??""};`),De(ye,S(q).category),De(se,we)},[()=>_n(S(q).amount)]),oe(G,R)}),F(V),oe(H,V)};Le(ge,H=>{O().length>0&&H(be)})}oe(g,P),En()}const Va=(g,v,x,w,T)=>{pe(v,!0),pe(x,""),pe(w,""),pe(T,{},!0)},Di=async(g,v,x)=>{if(S(v))try{await Ae.deleteEffort(S(v).id),x()}catch(w){console.error("Failed to delete effort:",w)}};var Ii=Pe('<div class="hero min-h-[50vh]"><div class="hero-content text-center"><div class="max-w-md"><h2 class="text-xl font-semibold mb-4">No savings efforts yet</h2> <p class="mb-6">Create your first savings goal to start tracking your progress.</p> <button class="btn btn-primary">Create First Effort</button></div></div></div>'),ji=(g,v,x)=>v(S(x)),$i=(g,v,x)=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),v(S(x)))},Ni=(g,v,x)=>{g.stopPropagation(),v(S(x))},Mi=Pe('<div class="card bg-base-100 shadow-md hover:shadow-lg transition-shadow cursor-pointer" role="button" tabindex="0"><div class="card-body p-4"><div class="flex justify-between items-center mb-4"><h3 class="card-title text-lg"> </h3> <button class="btn btn-ghost btn-sm text-error hover:bg-error hover:text-error-content" aria-label="Delete effort"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div> <!></div></div>'),qi=Pe('<div class="grid gap-4"></div>'),Bi=Pe(`<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg mb-4">Delete Savings Effort</h3> <p class="mb-6">Are you sure you want to delete "<strong> </strong>"?
					This action cannot be undone and will also delete all associated savings entries.</p> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="button" class="btn btn-error">Delete Effort</button></div></div></div>`),Ri=Pe('<div class="text-error text-sm mb-1"> </div>'),Fi=Pe('<div class="text-error text-sm mb-1"> </div>'),zi=Pe('<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg mb-4">Create New Savings Effort</h3> <form class="space-y-4"><div class="form-control"><label class="label" for="effort-name"><span class="label-text">Effort Name</span></label> <!> <input id="effort-name" type="text" placeholder="e.g., Vacation Fund, Emergency Savings" required/></div> <div class="form-control"><label class="label" for="effort-target"><span class="label-text">Target Amount (optional)</span></label> <!> <input id="effort-target" type="number" step="0.01" min="0.01" placeholder="0.00"/></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary">Create Effort</button></div></form></div></div>'),Li=Pe('<div class="space-y-4"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">Savings Efforts</h1> <button class="btn btn-primary btn-sm"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Effort</button></div> <!> <!> <!></div>');function Wi(g,v){kn(v,!0);let x=tt(!1),w=tt(""),T=tt(""),O=tt(sr({})),P=tt(!1),A=tt(null);const te=M=>{Ae.setCurrentEffort(M)},re=()=>{pe(x,!1),pe(w,""),pe(T,""),pe(O,{},!0)},le=()=>{pe(O,{},!0);let M=!0;return S(w).trim()||(S(O).name="Effort name is required",M=!1),S(T)&&(isNaN(parseFloat(S(T)))||parseFloat(S(T))<=0)&&(S(O).target="Please enter a valid positive target amount",M=!1),M},ie=async()=>{if(le())try{const M={name:S(w).trim(),targetAmount:S(T)?parseFloat(S(T)):void 0,createdAt:new Date,updatedAt:new Date};await Ae.createEffort(M),re()}catch(M){console.error("Failed to create effort:",M)}},me=M=>{pe(A,M,!0),pe(P,!0)},xe=()=>{pe(P,!1),pe(A,null)};var W=Li(),X=L(W),ae=Y(L(X),2);ae.__click=[Va,x,w,T,O],F(X);var ge=Y(X,2);{var be=M=>{var J=Ii(),ye=L(J),ce=L(ye),se=Y(L(ce),4);se.__click=[Va,x,w,T,O],F(ce),F(ye),F(J),oe(M,J)},H=M=>{var J=qi();an(J,21,()=>Ae.sortedEfforts,ye=>ye.id,(ye,ce)=>{var se=Mi();se.__click=[ji,te,ce],se.__keydown=[$i,te,ce];var we=L(se),qe=L(we),ke=L(qe),Ie=L(ke,!0);F(ke);var lt=Y(ke,2);lt.__click=[Ni,me,ce],F(qe);var Be=Y(qe,2);ro(Be,{get effortId(){return S(ce).id},showTotal:!0}),F(we),F(se),Me(()=>De(Ie,S(ce).name)),oe(ye,se)}),F(J),oe(M,J)};Le(ge,M=>{Ae.sortedEfforts.length===0?M(be):M(H,!1)})}var V=Y(ge,2);{var G=M=>{var J=Bi(),ye=L(J),ce=Y(L(ye),2),se=Y(L(ce)),we=L(se,!0);F(se),oi(),F(ce);var qe=Y(ce,2),ke=L(qe);ke.__click=xe;var Ie=Y(ke,2);Ie.__click=[Di,A,xe],F(qe),F(ye),F(J),Me(()=>De(we,S(A).name)),oe(M,J)};Le(V,M=>{S(P)&&S(A)&&M(G)})}var q=Y(V,2);{var R=M=>{var J=zi(),ye=L(J),ce=Y(L(ye),2),se=L(ce),we=Y(L(se),2);{var qe=Se=>{var rt=Ri(),ft=L(rt,!0);F(rt),Me(()=>De(ft,S(O).name)),oe(Se,rt)};Le(we,Se=>{S(O).name&&Se(qe)})}var ke=Y(we,2);Xr(ke),F(se);var Ie=Y(se,2),lt=Y(L(Ie),2);{var Be=Se=>{var rt=Fi(),ft=L(rt,!0);F(rt),Me(()=>De(ft,S(O).target)),oe(Se,rt)};Le(lt,Se=>{S(O).target&&Se(Be)})}var He=Y(lt,2);Xr(He),F(Ie);var We=Y(Ie,2),xt=L(We);xt.__click=re;var Vt=Y(xt,2);F(We),F(ce),F(ye),F(J),Me(Se=>{nr(ke,1,`input input-bordered ${S(O).name?"input-error":""}`),nr(He,1,`input input-bordered ${S(O).target?"input-error":""}`),Vt.disabled=Se},[()=>!S(w).trim()]),to("submit",ce,ie),rr(ke,()=>S(w),Se=>pe(w,Se)),rr(He,()=>S(T),Se=>pe(T,Se)),oe(M,J)};Le(q,M=>{S(x)&&M(R)})}F(W),oe(g,W),En()}eo(["click","keydown"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Vi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ui=ii("<svg><!><!></svg>");function gt(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]),w=it(x,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);kn(v,!1);let T=Wt(v,"name",8,void 0),O=Wt(v,"color",8,"currentColor"),P=Wt(v,"size",8,24),A=Wt(v,"strokeWidth",8,2),te=Wt(v,"absoluteStrokeWidth",8,!1),re=Wt(v,"iconNode",24,()=>[]);const le=(...W)=>W.filter((X,ae,ge)=>!!X&&ge.indexOf(X)===ae).join(" ");Ko();var ie=Ui();Fa(ie,(W,X)=>({...Vi,...w,width:P(),height:P(),stroke:O(),"stroke-width":W,class:X}),[()=>(bn(te()),bn(A()),bn(P()),Yr(()=>te()?Number(A())*24/Number(P()):A())),()=>(bn(T()),bn(x),Yr(()=>le("lucide-icon","lucide",T()?`lucide-${T()}`:"",x.class)))]);var me=L(ie);an(me,1,re,Zr,(W,X)=>{var ae=Gr(()=>si(S(X),2));let ge=()=>S(ae)[0],be=()=>S(ae)[1];var H=nt(),V=Ge(H);di(V,ge,!0,(G,q)=>{Fa(G,()=>({...be()}))}),oe(W,H)});var xe=Y(me);ct(xe,v,"default",{}),F(ie),oe(g,ie),En()}function Hi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];gt(g,mt({name:"dollar-sign"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Yi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];gt(g,mt({name:"file-text"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Gi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16"}],["path",{d:"M2 21h13"}],["path",{d:"M3 9h11"}]];gt(g,mt({name:"fuel"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Qi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["line",{x1:"6",x2:"10",y1:"11",y2:"11"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"}]];gt(g,mt({name:"gamepad-2"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Xi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"}]];gt(g,mt({name:"heart"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Zi(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"}]];gt(g,mt({name:"plane"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Ji(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]];gt(g,mt({name:"shopping-cart"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function Ua(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];gt(g,mt({name:"tag"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function es(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M16 7h6v6"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17"}]];gt(g,mt({name:"trending-up"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}function ts(g,v){const x=it(v,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.546.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const w=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}],["path",{d:"M7 2v20"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"}]];gt(g,mt({name:"utensils"},()=>x,{get iconNode(){return w},children:(T,O)=>{var P=nt(),A=Ge(P);ct(A,v,"default",{}),oe(T,P)},$$slots:{default:!0}}))}const ns=()=>{Ae.setCurrentEffort(null)};var rs=Pe('<div class="text-error text-sm mb-1"> </div>'),as=Pe('<div class="text-error text-sm mb-1"> </div>'),os=(g,v,x)=>pe(v,S(x).id,!0),is=Pe('<button type="button" class="btn btn-outline btn-sm h-auto p-3 flex flex-col items-center gap-1"><!> <span class="text-xs capitalize"> </span></button>'),ss=Pe('<div class="text-center py-8 text-base-content/50">No entries yet. Add your first savings entry above.</div>'),us=Pe('<span class="text-sm"> </span>'),cs=Pe('<div class="card bg-base-100 shadow-sm"><div class="card-body p-4"><div class="flex justify-between items-start"><div class="flex items-center gap-2"><div class="flex items-center gap-1 badge"><!> <span class="capitalize"> </span></div> <!></div> <div class="text-right"><div> </div> <div class="text-xs text-base-content/50"> </div></div></div></div></div>'),ls=Pe('<div class="space-y-6"><div class="flex items-center gap-4"><button class="btn btn-ghost btn-sm" aria-label="Go back to efforts list"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <div><h1 class="text-3xl font-bold"> </h1> <div class="text-sm text-base-content/70 mt-1"> </div></div></div> <div class="card bg-base-100 shadow-md"><div class="card-body p-6"><!></div></div> <div class="card bg-base-100 shadow-md"><div class="card-body p-6"><h3 class="card-title text-xl font-semibold mb-6">Add New Entry</h3> <form class="space-y-4"><div class="form-control"><label class="label mb-2" for="entry-amount"><span class="label-text">Amount</span></label> <!> <div class="flex items-baseline justify-center"><span class="text-base-content/60 text-xl font-medium opacity-0 mr-2">€</span> <input id="entry-amount" type="number" step="0.01" min="0.01" style="-webkit-appearance: none; -moz-appearance: textfield;" required/> <span class="text-base-content/60 text-xl font-medium ml-2"> </span></div></div> <div class="form-control"><label class="label mb-2" for="category-selection"><span class="label-text-alt text-sm text-base-content/60">Select a category for this entry</span></label> <!> <div class="grid grid-cols-2 gap-2" id="category-selection"></div></div> <div class="form-control"><label class="label mb-2" for="entry-description"><span class="label-text">Description (optional)</span></label> <textarea id="entry-description" placeholder="Add a note about this entry..." class="textarea textarea-bordered resize-none w-full" rows="3"></textarea></div> <button type="submit" class="btn btn-primary w-full">Add Entry</button></form></div></div> <div class="space-y-3"><h3 class="text-xl font-semibold mb-4">Entries</h3> <!></div></div>');function fs(g,v){kn(v,!0);let x=tt(""),w=tt(""),T=tt(""),O=tt(sr({}));const P=()=>{pe(O,{},!0);let Q=!0;if(!S(x).toString().trim())S(O).amount="Amount is required",Q=!1;else{const he=parseFloat(S(x));(isNaN(he)||he<=0)&&(S(O).amount="Please enter a valid positive amount",Q=!1)}return S(w)||(S(O).category="Please select a category",Q=!1),Q},A=()=>{if(!(!P()||!Ae.currentEffort))try{const Q={effortId:Ae.currentEffort.id,amount:parseFloat(S(x)),category:S(w),description:S(T).trim()||void 0,createdAt:new Date};rn.createEntry(Q),pe(x,""),pe(w,""),pe(T,""),pe(O,{},!0)}catch(Q){console.error("Failed to add entry:",Q)}},te=Q=>{switch(Q){case"utensils":return ts;case"plane":return Zi;case"dollar-sign":return Hi;case"gamepad-2":return Qi;case"fuel":return Gi;case"shopping-cart":return Ji;case"file-text":return Yi;case"heart":return Xi;case"trending-up":return es;case"tag":return Ua;default:return Ua}},re=Q=>{const he=Q.replace("#",""),Qe=parseInt(he.substr(0,2),16),z=parseInt(he.substr(2,2),16),Oe=parseInt(he.substr(4,2),16);return(.299*Qe+.587*z+.114*Oe)/255>.5?"#000000":"#ffffff"};var le=ls(),ie=L(le),me=L(ie);me.__click=[ns];var xe=Y(me,2),W=L(xe),X=L(W,!0);F(W);var ae=Y(W,2),ge=L(ae);F(ae),F(xe),F(ie);var be=Y(ie,2),H=L(be),V=L(H);ro(V,{get effortId(){return Ae.currentEffort.id},showTotal:!0}),F(H),F(be);var G=Y(be,2),q=L(G),R=Y(L(q),2),M=L(R),J=Y(L(M),2);{var ye=Q=>{var he=rs(),Qe=L(he,!0);F(he),Me(()=>De(Qe,S(O).amount)),oe(Q,he)};Le(J,Q=>{S(O).amount&&Q(ye)})}var ce=Y(J,2),se=Y(L(ce),2);Xr(se);var we=Y(se,2),qe=L(we,!0);F(we),F(ce),F(M);var ke=Y(M,2),Ie=Y(L(ke),2);{var lt=Q=>{var he=as(),Qe=L(he,!0);F(he),Me(()=>De(Qe,S(O).category)),oe(Q,he)};Le(Ie,Q=>{S(O).category&&Q(lt)})}var Be=Y(Ie,2);an(Be,21,()=>er.categories,Q=>Q.id,(Q,he)=>{const Qe=Gr(()=>S(w)===S(he).id),z=Gr(()=>S(Qe)?re(S(he).color):S(he).color);var Oe=is();Oe.__click=[os,w,he];var at=L(Oe);Ra(at,()=>te(S(he).icon),(Tt,Ye)=>{Ye(Tt,{class:"w-5 h-5"})});var de=Y(at,2),dt=L(de,!0);F(de),F(Oe),Me(()=>{xn(Oe,`border-color: ${S(he).color??""}; background-color: ${(S(Qe)?S(he).color:"transparent")??""}; color: ${S(z)??""};`),Qr(Oe,"aria-pressed",S(Qe)),Qr(Oe,"aria-label",`Select ${S(he).id??""} category`),De(dt,S(he).id)}),oe(Q,Oe)}),F(Be),F(ke);var He=Y(ke,2),We=Y(L(He),2);ui(We),F(He);var xt=Y(He,2);F(R),F(q),F(G);var Vt=Y(G,2),Se=Y(L(Vt),2);{var rt=Q=>{var he=ss();oe(Q,he)},ft=Q=>{var he=nt(),Qe=Ge(he);an(Qe,17,()=>rn.sortedFilteredEntries,z=>z.id,(z,Oe)=>{var at=cs(),de=L(at),dt=L(de),Tt=L(dt),Ye=L(Tt),Pn=L(Ye);Ra(Pn,()=>te(er.categories.find(Te=>Te.id===S(Oe).category)?.icon||"tag"),(Te,Ve)=>{Ve(Te,{class:"w-3 h-3"})});var Sn=Y(Pn,2),ur=L(Sn,!0);F(Sn),F(Ye);var cr=Y(Ye,2);{var on=Te=>{var Ve=us(),$t=L(Ve,!0);F(Ve),Me(()=>De($t,S(Oe).description)),oe(Te,Ve)};Le(cr,Te=>{S(Oe).description&&Te(on)})}F(Tt);var Xe=Y(Tt,2),Dt=L(Xe),It=L(Dt);F(Dt);var sn=Y(Dt,2),jt=L(sn,!0);F(sn),F(Xe),F(dt),F(de),F(at),Me((Te,Ve,$t)=>{xn(Ye,`background-color: ${Te??""}; color: white;`),De(ur,S(Oe).category),nr(Dt,1,`font-semibold ${S(Oe).amount>=0?"text-success":"text-error"}`),De(It,`${S(Oe).amount>=0?"+":""}${Ve??""}`),De(jt,$t)},[()=>er.categories.find(Te=>Te.id===S(Oe).category)?.color||"#666",()=>_n(S(Oe).amount),()=>S(Oe).createdAt.toLocaleDateString()]),oe(z,at)}),oe(Q,he)};Le(Se,Q=>{rn.filteredEntries.length===0?Q(rt):Q(ft,!1)})}F(Vt),F(le),Me(Q=>{De(X,Ae.currentEffort?.name),De(ge,`Created: ${Q??""}`),nr(se,1,`w-32 pb-2 bg-transparent border-0 border-b-2 border-base-content/20 focus:border-primary focus:outline-none text-xl font-medium text-center ${S(O).amount?"border-error":""}`),De(qe,ta.symbol),xt.disabled=!S(x)||!S(w)},[()=>Ae.currentEffort?.createdAt.toLocaleDateString()]),to("submit",R,A),rr(se,()=>S(x),Q=>pe(x,Q)),rr(We,()=>S(T),Q=>pe(T,Q)),oe(g,le),En()}eo(["click"]);var ds=Pe('<main class="container mx-auto p-4 max-w-md svelte-xo6w1v"><!></main>');function hs(g,v){kn(v,!0),To(async()=>{try{await Ei()}catch(P){console.error("Failed to initialize app:",P)}}),ci(()=>{Ae.currentEffort&&window.scrollTo(0,0)});var x=ds(),w=L(x);{var T=P=>{fs(P,{})},O=P=>{Wi(P,{})};Le(w,P=>{Ae.currentEffort?P(T):P(O,!1)})}F(x),oe(g,x),En()}function Ts(g){hs(g,{})}export{Ts as component};
